{"version":3,"sources":["view/TrackToken/CoinTitle/CoinTitle.module.scss","view/TrackToken/Variation/Variation.module.scss","view/TrackToken/Price/Price.module.scss","view/TrackToken/Pool/Pool.module.scss","view/TrackToken/TrackToken.module.scss","service/notificationService.ts","service/tokenMappingService.ts","service/notificationMappingService.ts","view/TrackToken/CoinTitle/CoinTitle.tsx","view/TrackToken/Variation/Variation.tsx","view/TrackToken/Price/Price.tsx","view/TrackToken/Pool/Pool.tsx","view/TrackToken/TrackToken.tsx"],"names":["module","exports","pushBrowserNotification","browserNotifications","defaultIcon","forEach","browserNotification","Notification","title","icon","body","onclick","e","preventDefault","window","open","address","buildPoolColumn","token","_","isNil","targetPool","liquidity","tokenHelper","convertToInternationalCurrencySystem","dApp","DApp","PANCAKE","quoteSymbol","round","variationPrice","VARIATION_PERCENT_HIGHLIGHT","Math","abs","variationLiquidity","mappingVariationBrowserNotification","tokens","notifications","variationNotification","isPush","notification","buildTitleNotification","logoURI","buildBodyNotification","loser","LOSER_LEVEL_LIQUIDITY","A","LIQUIDITY","LOSER","push","B","C","chain","reverse","uniqBy","value","LOSER_LEVEL","getIconLevelLoser","burn","symbol","name","buildBurnPercent","roundCurrency","price","CoinTitle","props","state","isCopied","onCopyClipboard","bind","onOpenLinkInfo","copy","this","setState","setTimeout","web","coinTitle","className","style","button","onClick","logo","alt","src","logoBep20","href","target","rel","check","location","PureComponent","Variation","getStyle","getVariationText","variation","normal","manyUp","manyDown","division","wrap","Price","Pool","pool","TrackToken","stopRecursion","columnConfigs","cell","row","minWidth","filterText","createTheme","background","default","onChangeFilter","loadingService","showLoading","getTokenInfos","getPools","hideLoading","recursionUpdateTokenPrice","permission","requestPermission","toast","warn","prevProps","JSON","stringify","tokenNotifications","then","info","updateTokenPrice","Promise","r","CHUNK_DATA_DELAY","topMoverTokens","topDownMovers","slice","topUpMovers","sortTopMoverTokens","filter","toLowerCase","includes","fluid","xl","offset","size","InputText","filterInput","isShowClear","placeholder","onChange","columns","data","filterTokens","pagination","responsive","theme","customStyles","rows","minHeight","headCells","fontSize","fontWeight","cells","connect","sortBy","map","divisionPrice"],"mappings":"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","file":"static/js/8.331ec656.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"logo\":\"CoinTitle_logo__2Jifj\",\"title\":\"CoinTitle_title__3Vc57\",\"button\":\"CoinTitle_button__8seWB\",\"check\":\"CoinTitle_check__2aNRZ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrap\":\"Variation_wrap__1nOO2\",\"normal\":\"Variation_normal__3Yadl\",\"manyUp\":\"Variation_manyUp__QG-h8\",\"manyDown\":\"Variation_manyDown__FvkCo\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrap\":\"Price_wrap__3iS7p\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrap\":\"Pool_wrap__3GOwt\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"filterInput\":\"TrackToken_filterInput__2wNWj\"};","import { toast } from 'react-toastify';\r\nimport { IBrowserNotification } from '../model/notificationModel';\r\nimport logoBep20 from '../asset/logo/bep20.png';\r\n\r\nexport function checkBrowserNotification() {\r\n  if (!('Notification' in window)) {\r\n    toast.warn('This browser does not support desktop notification!');\r\n\r\n    return;\r\n  }\r\n\r\n  if (Notification.permission !== 'granted') Notification.requestPermission();\r\n}\r\n\r\nexport function notifyVariationPrice(\r\n  browserNotifications: IBrowserNotification[]\r\n) {\r\n  if (!('Notification' in window)) {\r\n    browserNotifications.forEach(\r\n      (browserNotification: IBrowserNotification) => {\r\n        toast.info(`${browserNotification.title}`);\r\n      }\r\n    );\r\n  } else {\r\n    if (Notification.permission === 'granted') {\r\n      pushBrowserNotification(browserNotifications, logoBep20);\r\n    } else {\r\n      Notification.requestPermission().then((permission: string) => {\r\n        if (permission === 'granted') {\r\n          pushBrowserNotification(browserNotifications, logoBep20);\r\n        }\r\n      });\r\n    }\r\n  }\r\n}\r\n\r\nfunction pushBrowserNotification(\r\n  browserNotifications: IBrowserNotification[],\r\n  defaultIcon?: string\r\n) {\r\n  browserNotifications.forEach((browserNotification: IBrowserNotification) => {\r\n    const notification = new Notification(browserNotification.title, {\r\n      icon: browserNotification.icon || defaultIcon,\r\n      body: browserNotification.body,\r\n    });\r\n\r\n    notification.onclick = function (e) {\r\n      e.preventDefault();\r\n      window.open(\r\n        `https://poocoin.app/tokens/${browserNotification.address}`,\r\n        '_blank'\r\n      );\r\n    };\r\n  });\r\n}\r\n","import _ from 'lodash';\r\nimport { VARIATION_PERCENT_HIGHLIGHT } from '../config/appConfig';\r\nimport tokenHelper from '../helper/tokenHelper';\r\nimport { DApp, ITokenDetail, ITokenTable } from '../model/tokenModel';\r\n\r\nexport function mappingTokenTable(tokens: ITokenDetail[]): ITokenTable[] {\r\n  const mappedTokenTable: ITokenTable[] = _.chain(tokens)\r\n    .sortBy(['variationPrice'])\r\n    .map(\r\n      (token: ITokenDetail): ITokenTable => ({\r\n        coinTitle: `${\r\n          _.isNil(token.burn)\r\n            ? token.name\r\n            : '*[' +\r\n              tokenHelper.buildBurnPercent(token.burn) +\r\n              '] ' +\r\n              token.name\r\n        } (${token.symbol ? token.symbol : 'NA'})`,\r\n        pool: buildPoolColumn(token),\r\n        price: _.isNil(token.price)\r\n          ? 'NA'\r\n          : `${tokenHelper.roundCurrency(token.price)}`,\r\n        variation: token.variationPrice as number,\r\n        division: token.divisionPrice as number,\r\n        address: token.address,\r\n        logoURI: token.logoURI,\r\n        web: token.web,\r\n      })\r\n    )\r\n    .value();\r\n\r\n  return mappedTokenTable;\r\n}\r\n\r\nexport function sortTopMoverTokens(tokens: ITokenTable[]): ITokenTable[] {\r\n  const topDownMovers: ITokenTable[] = _.slice(tokens, 0, 5);\r\n  const topUpMovers: ITokenTable[] = _.slice(tokens, -5);\r\n  const topMoverTokens: ITokenTable[] = _.uniqBy(\r\n    [...topDownMovers, ...topUpMovers, ..._.slice(tokens, 5, -5)],\r\n    'address'\r\n  );\r\n\r\n  return topMoverTokens;\r\n}\r\n\r\nfunction buildPoolColumn(token: ITokenDetail): string {\r\n  return _.isNil(token.targetPool?.liquidity)\r\n    ? 'NA'\r\n    : `${tokenHelper.convertToInternationalCurrencySystem(\r\n        token.targetPool?.liquidity as number\r\n      )} (${\r\n        token.targetPool?.dApp === DApp.PANCAKE\r\n          ? ''\r\n          : token.targetPool?.dApp + ' | '\r\n      }${token.targetPool?.quoteSymbol})${\r\n        _.round(token.variationPrice as number, 2) <=\r\n        -VARIATION_PERCENT_HIGHLIGHT\r\n          ? '  ↓' +\r\n            tokenHelper.convertToInternationalCurrencySystem(\r\n              Math.abs(token.variationLiquidity as number)\r\n            )\r\n          : ''\r\n      }`;\r\n}\r\n","import _ from 'lodash';\r\nimport { LOSER_LEVEL, LOSER_LEVEL_LIQUIDITY } from '../config/appConfig';\r\nimport tokenHelper from '../helper/tokenHelper';\r\nimport { DApp, ITokenDetail } from '../model/tokenModel';\r\nimport { IBrowserNotification } from '../model/notificationModel';\r\n\r\nexport function mappingVariationBrowserNotification(\r\n  tokens: ITokenDetail[]\r\n): IBrowserNotification[] {\r\n  let notifications: IBrowserNotification[] = [];\r\n\r\n  tokens.forEach((token: ITokenDetail) => {\r\n    if (token.variationNotification?.isPush) {\r\n      const notification: IBrowserNotification = {\r\n        address: token.address,\r\n        title: buildTitleNotification(token),\r\n        icon: token.logoURI,\r\n        body: buildBodyNotification(token),\r\n      };\r\n      const liquidity: number = _.round(token.targetPool?.liquidity as number, 2);\r\n      const loser: number = Math.abs(\r\n        _.round(token.variationPrice as number, 2)\r\n      );\r\n\r\n      if (liquidity < LOSER_LEVEL_LIQUIDITY.A.LIQUIDITY) {\r\n        loser >= LOSER_LEVEL_LIQUIDITY.A.LOSER &&\r\n          notifications.push(notification);\r\n      } else if (liquidity < LOSER_LEVEL_LIQUIDITY.B.LIQUIDITY) {\r\n        loser >= LOSER_LEVEL_LIQUIDITY.B.LOSER &&\r\n          notifications.push(notification);\r\n      } else if (liquidity < LOSER_LEVEL_LIQUIDITY.C.LIQUIDITY) {\r\n        loser >= LOSER_LEVEL_LIQUIDITY.C.LOSER &&\r\n          notifications.push(notification);\r\n      } else {\r\n        notifications.push(notification);\r\n      }\r\n    }\r\n  });\r\n\r\n  notifications = _.chain(notifications).reverse().uniqBy('address').value();\r\n\r\n  return notifications;\r\n}\r\n\r\nfunction buildTitleNotification(token: ITokenDetail): string {\r\n  const icon: string = getIconLevelLoser(\r\n    Math.abs(_.round(token.variationPrice as number, 2))\r\n  );\r\n\r\n  return `${icon} ${\r\n    _.isNil(token.burn)\r\n      ? token.symbol || token.name\r\n      : '*[' +\r\n        tokenHelper.buildBurnPercent(token.burn) +\r\n        '] ' +\r\n        (token.symbol || token.name)\r\n  } ${_.round(token.variationPrice as number, 2)}%`;\r\n}\r\n\r\nfunction getIconLevelLoser(loser: number): string {\r\n  if (loser > LOSER_LEVEL.C) {\r\n    return '🍇';\r\n  }\r\n  if (loser > LOSER_LEVEL.B) {\r\n    return '🍊';\r\n  }\r\n  if (loser > LOSER_LEVEL.A) {\r\n    return '🍏';\r\n  }\r\n\r\n  return '💹';\r\n}\r\n\r\nfunction buildBodyNotification(token: ITokenDetail): string {\r\n  return `💵 $${tokenHelper.roundCurrency(\r\n    token.price as number\r\n  )}\\n👉 ${tokenHelper.convertToInternationalCurrencySystem(\r\n    token.targetPool?.liquidity as number\r\n  )} (${\r\n    token.targetPool?.dApp === DApp.PANCAKE\r\n      ? ''\r\n      : token.targetPool?.dApp + ' | '\r\n  }${\r\n    token.targetPool?.quoteSymbol\r\n  })  -${tokenHelper.convertToInternationalCurrencySystem(\r\n    Math.abs(token.variationLiquidity as number)\r\n  )}💰`;\r\n}\r\n\r\nexport function mappingVariationBrowserNotificationFomo(\r\n  tokens: ITokenDetail[]\r\n): IBrowserNotification[] {\r\n  let notifications: IBrowserNotification[] = [];\r\n\r\n  tokens.forEach((token: ITokenDetail) => {\r\n    if (token.variationNotificationFomo?.isPush) {\r\n      const notification: IBrowserNotification = {\r\n        address: token.address,\r\n        title: `${\r\n          _.isNil(token.burn)\r\n            ? token.symbol || token.name\r\n            : '*[' +\r\n              tokenHelper.buildBurnPercent(token.burn) +\r\n              '] ' +\r\n              (token.symbol || token.name)\r\n        } +${_.round(token.variationPrice as number, 2)}%`,\r\n        icon: token.logoURI,\r\n        body: `$${tokenHelper.roundCurrency(\r\n          token.price as number\r\n        )} | ${tokenHelper.convertToInternationalCurrencySystem(\r\n          token.targetPool?.liquidity as number\r\n        )} (${token.targetPool?.dApp} | ${token.targetPool?.quoteSymbol})`,\r\n      };\r\n\r\n      notifications.push(notification);\r\n    }\r\n  });\r\n\r\n  return notifications;\r\n}\r\n","import { PureComponent, ReactElement, Fragment } from 'react';\r\nimport copy from 'copy-to-clipboard';\r\nimport logoBep20 from '../../../asset/logo/bep20.png';\r\nimport style from './CoinTitle.module.scss';\r\n\r\ninterface IStoreProps {}\r\ninterface IHOCProps {}\r\ninterface IOwnProps {\r\n  coinTitle: string;\r\n  address: string;\r\n  logoURI?: string;\r\n  web?: string;\r\n}\r\ninterface IOwnState {\r\n  isCopied: boolean;\r\n}\r\n\r\nclass CoinTitle extends PureComponent<\r\n  IOwnProps & IHOCProps & IStoreProps,\r\n  IOwnState\r\n> {\r\n  state: IOwnState;\r\n\r\n  constructor(props: IOwnProps & IHOCProps & IStoreProps) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      isCopied: false,\r\n    };\r\n\r\n    this.onCopyClipboard = this.onCopyClipboard.bind(this);\r\n    this.onOpenLinkInfo = this.onOpenLinkInfo.bind(this);\r\n  }\r\n\r\n  private onCopyClipboard(address: string) {\r\n    copy(address);\r\n\r\n    this.setState({ isCopied: true });\r\n\r\n    setTimeout(() => {\r\n      this.setState({ isCopied: false });\r\n    }, 2000);\r\n  }\r\n\r\n  private onOpenLinkInfo() {\r\n    const { address, web } = this.props;\r\n\r\n    window.open(`https://tokensniffer.com/token/${address}`);\r\n    if (web) {\r\n      window.open(web);\r\n    } else {\r\n      window.open(`https://www.coingecko.com/en/coins/${address}`);\r\n    }\r\n  }\r\n\r\n  render(): ReactElement {\r\n    const { coinTitle, address, logoURI } = this.props;\r\n    const { isCopied } = this.state;\r\n\r\n    return (\r\n      <Fragment>\r\n        <button\r\n          className={style.button}\r\n          title='Check info'\r\n          onClick={this.onOpenLinkInfo}\r\n        >\r\n          <img\r\n            className={style.logo}\r\n            alt={''}\r\n            src={logoURI || logoBep20}\r\n          />\r\n        </button>\r\n\r\n        <a\r\n          className={style.title}\r\n          href={`https://dexscreener.com/bsc/${address}`}\r\n          target='_blank'\r\n          rel='noopener noreferrer'\r\n          title={'Link to poocoin'}\r\n        >\r\n          {coinTitle}\r\n        </a>\r\n        {isCopied ? (\r\n          <button className={`${style.button} ${style.check}`} title='Copied!'>\r\n            <i className='bi bi-check2'></i>\r\n          </button>\r\n        ) : (\r\n          <button\r\n            className={style.button}\r\n            title='Copy contract to clipboard'\r\n            onClick={() => this.onCopyClipboard(address)}\r\n          >\r\n            <i className='bi bi-clipboard'></i>\r\n          </button>\r\n        )}\r\n        <a\r\n          href={`${window.location.href}#/swap/${address}`}\r\n          target='_blank'\r\n          rel='noopener noreferrer'\r\n          title={'Flast Swap'}\r\n        >\r\n          <button className={style.button}>\r\n            <i className='bi bi-currency-exchange'></i>\r\n          </button>\r\n        </a>\r\n      </Fragment>\r\n    );\r\n  }\r\n}\r\n\r\nexport default CoinTitle;\r\n","import { PureComponent, ReactElement } from 'react';\r\nimport _ from 'lodash';\r\nimport { VARIATION_PERCENT_HIGHLIGHT } from '../../../config/appConfig';\r\nimport style from './Variation.module.scss';\r\n\r\ninterface IStoreProps {}\r\ninterface IHOCProps {}\r\ninterface IOwnProps {\r\n  variation: number;\r\n  division: number;\r\n}\r\ninterface IOwnState {}\r\n\r\nclass Variation extends PureComponent<\r\n  IOwnProps & IHOCProps & IStoreProps,\r\n  IOwnState\r\n> {\r\n  constructor(props: IOwnProps & IHOCProps & IStoreProps) {\r\n    super(props);\r\n\r\n    this.getStyle = this.getStyle.bind(this);\r\n    this.getVariationText = this.getVariationText.bind(this);\r\n  }\r\n\r\n  private getStyle(): string {\r\n    if (_.isNil(this.props.variation)) return style.normal;\r\n\r\n    const variation = _.round(this.props.variation, 2);\r\n\r\n    if (\r\n      variation > -VARIATION_PERCENT_HIGHLIGHT &&\r\n      variation < VARIATION_PERCENT_HIGHLIGHT\r\n    ) {\r\n      return style.normal;\r\n    } else if (variation >= VARIATION_PERCENT_HIGHLIGHT) {\r\n      return style.manyUp;\r\n    } else {\r\n      return style.manyDown;\r\n    }\r\n  }\r\n\r\n  private getVariationText(): string {\r\n    if (_.isNil(this.props.variation)) return 'NA';\r\n\r\n    const variation = _.round(this.props.variation, 2);\r\n    const division = _.round(this.props.division, 1);\r\n    let variationText: string;\r\n\r\n    if (variation === 0) {\r\n      variationText = variation + '%';\r\n    } else if (variation > 0) {\r\n      variationText = '+' + variation + '%';\r\n    } else {\r\n      variationText =\r\n        variation +\r\n        '%' +\r\n        (variation <= -VARIATION_PERCENT_HIGHLIGHT ? `  ↓${division}` : '');\r\n    }\r\n\r\n    return variationText;\r\n  }\r\n\r\n  render(): ReactElement {\r\n    return (\r\n      <span className={style.wrap + ' ' + this.getStyle()}>\r\n        {this.getVariationText()}\r\n      </span>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Variation;\r\n","import style from './Price.module.scss';\r\n\r\nexport default function Price(props: { price: string }) {\r\n  return <span className={style.wrap}>{props.price}</span>;\r\n}\r\n","import style from './Pool.module.scss';\r\n\r\nexport default function Pool(props: { pool: string }) {\r\n  return <span className={style.wrap}>{props.pool}</span>;\r\n}\r\n","import { PureComponent, ReactElement } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { Container, Row, Col } from 'reactstrap';\r\nimport DataTable, { createTheme } from 'react-data-table-component';\r\nimport { CHUNK_DATA_DELAY } from '../../config/appConfig';\r\nimport { TStoreState } from '../../store/config/store';\r\nimport loadingService from '../../service/loadingService';\r\nimport { getTokenInfos } from '../../service/tokenInfoService';\r\nimport { getPools } from '../../service/tokenPoolService';\r\nimport { updateTokenPrice } from '../../service/tokenPriceService';\r\nimport { checkBrowserNotification } from '../../service/notificationService';\r\nimport { notifyVariationPrice } from '../../service/notificationService';\r\nimport {\r\n  mappingTokenTable,\r\n  sortTopMoverTokens,\r\n} from '../../service/tokenMappingService';\r\nimport {\r\n  mappingVariationBrowserNotification,\r\n  // mappingVariationBrowserNotificationFomo,\r\n} from '../../service/notificationMappingService';\r\nimport { ITokenTable } from '../../model/tokenModel';\r\nimport { IBrowserNotification } from '../../model/notificationModel';\r\nimport InputText from '../controls/InputText/InputText';\r\nimport CoinTitle from './CoinTitle/CoinTitle';\r\nimport Variation from './Variation/Variation';\r\nimport Price from './Price/Price';\r\nimport Pool from './Pool/Pool';\r\nimport style from './TrackToken.module.scss';\r\n\r\ninterface IStoreProps {\r\n  tokens: ITokenTable[];\r\n  tokenNotifications: IBrowserNotification[];\r\n  // tokenNotificationsFomo: IBrowserNotification[];\r\n}\r\ninterface IHOCProps {}\r\ninterface IOwnProps {}\r\ninterface IOwnState {\r\n  filterText: string;\r\n}\r\n\r\nclass TrackToken extends PureComponent<\r\n  IOwnProps & IHOCProps & IStoreProps,\r\n  IOwnState\r\n> {\r\n  state: IOwnState;\r\n\r\n  private stopRecursion = false;\r\n  private columnConfigs = [\r\n    {\r\n      name: 'Coin',\r\n      cell: (row: ITokenTable): ReactElement => {\r\n        return (\r\n          <CoinTitle\r\n            coinTitle={row.coinTitle}\r\n            address={row.address}\r\n            logoURI={row.logoURI}\r\n            web={row.web}\r\n          />\r\n        );\r\n      },\r\n      minWidth: '400px',\r\n    },\r\n    {\r\n      name: 'Variation',\r\n      cell: (row: ITokenTable): ReactElement => {\r\n        return <Variation variation={row.variation} division={row.division} />;\r\n      },\r\n      minWidth: '80px',\r\n    },\r\n    {\r\n      name: 'Price',\r\n      cell: (row: ITokenTable): ReactElement => {\r\n        return <Price price={row.price} />;\r\n      },\r\n      minWidth: '100px',\r\n    },\r\n    {\r\n      name: 'Pool',\r\n      // selector: (row: ITokenTable): string => row.pool,\r\n      cell: (row: ITokenTable): ReactElement => {\r\n        return <Pool pool={row.pool} />;\r\n      },\r\n      minWidth: '120px',\r\n    },\r\n  ];\r\n\r\n  constructor(props: IOwnProps & IHOCProps & IStoreProps) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      filterText: '',\r\n    };\r\n\r\n    createTheme('dark', {\r\n      background: {\r\n        default: 'transparent',\r\n      },\r\n    });\r\n\r\n    this.onChangeFilter = this.onChangeFilter.bind(this);\r\n  }\r\n\r\n  async componentDidMount() {\r\n    loadingService.showLoading();\r\n    await getTokenInfos();\r\n    await getPools();\r\n    loadingService.hideLoading();\r\n\r\n    this.recursionUpdateTokenPrice();\r\n\r\n    checkBrowserNotification();\r\n  }\r\n\r\n  componentDidUpdate(prevProps: IStoreProps) {\r\n    if (\r\n      JSON.stringify(this.props.tokenNotifications) !==\r\n      JSON.stringify(prevProps.tokenNotifications)\r\n    ) {\r\n      notifyVariationPrice(this.props.tokenNotifications);\r\n    }\r\n\r\n    // if (\r\n    //   JSON.stringify(this.props.tokenNotificationsFomo) !==\r\n    //   JSON.stringify(prevProps.tokenNotificationsFomo)\r\n    // ) {\r\n    //   notifyVariationPrice(this.props.tokenNotificationsFomo);\r\n    // }\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    this.stopRecursion = true;\r\n  }\r\n\r\n  private async recursionUpdateTokenPrice() {\r\n    if (this.stopRecursion) {\r\n      return;\r\n    }\r\n\r\n    await updateTokenPrice();\r\n    await new Promise((r) => setTimeout(r, CHUNK_DATA_DELAY));\r\n    await this.recursionUpdateTokenPrice();\r\n  }\r\n\r\n  private onChangeFilter(filterText: string) {\r\n    this.setState({ filterText });\r\n  }\r\n\r\n  private filterTokens(tokens: ITokenTable[]): ITokenTable[] {\r\n    const { filterText } = this.state;\r\n\r\n    if (!filterText) {\r\n      const topMoverTokens: ITokenTable[] = sortTopMoverTokens(tokens);\r\n\r\n      return topMoverTokens;\r\n    }\r\n\r\n    const filteredTokens: ITokenTable[] = tokens.filter(\r\n      (token: ITokenTable): boolean => {\r\n        return (\r\n          token.coinTitle.toLowerCase().includes(filterText.toLowerCase()) ||\r\n          token.address.toLowerCase() === filterText.toLowerCase()\r\n        );\r\n      }\r\n    );\r\n\r\n    return filteredTokens;\r\n  }\r\n\r\n  render(): ReactElement {\r\n    const { filterText } = this.state;\r\n    return (\r\n      <Container fluid='xl' className='py-2 py-lg-3 py-xl-5'>\r\n        <Row>\r\n          <Col\r\n            xl={{\r\n              offset: 1,\r\n              size: 10,\r\n            }}\r\n          >\r\n            <div className='fk-container px-2 px-lg-4 px-xl-5 pt-2 pt-lg-4 pt-xl-5 pb-xl-4'>\r\n              <div className='mb-1'>\r\n                <InputText\r\n                  className={'fk-input-lg ' + style.filterInput}\r\n                  isShowClear={true}\r\n                  placeholder={'Enter token name / address...'}\r\n                  value={filterText}\r\n                  onChange={this.onChangeFilter}\r\n                />\r\n              </div>\r\n              <DataTable\r\n                columns={this.columnConfigs}\r\n                data={this.filterTokens(this.props.tokens)}\r\n                pagination\r\n                responsive\r\n                theme={'dark'}\r\n                customStyles={{\r\n                  rows: {\r\n                    style: {\r\n                      minHeight: '52px',\r\n                    },\r\n                  },\r\n                  headCells: {\r\n                    style: {\r\n                      fontSize: '16px',\r\n                      fontWeight: '700',\r\n                    },\r\n                  },\r\n                  cells: {\r\n                    style: {\r\n                      fontSize: '14px',\r\n                      fontWeight: '500',\r\n                    },\r\n                  },\r\n                  pagination: {\r\n                    style: {\r\n                      fontSize: '14px',\r\n                      fontWeight: '500',\r\n                    },\r\n                  },\r\n                }}\r\n              />\r\n            </div>\r\n          </Col>\r\n        </Row>\r\n      </Container>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapState = (state: TStoreState): IStoreProps => ({\r\n  tokens: mappingTokenTable(state.tokens),\r\n  tokenNotifications: mappingVariationBrowserNotification(state.tokens),\r\n  // tokenNotificationsFomo: mappingVariationBrowserNotificationFomo(state.tokens),\r\n});\r\n\r\nexport default connect(mapState)(TrackToken);\r\n"],"sourceRoot":""}