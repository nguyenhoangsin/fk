{"version":3,"sources":["helper/tokenHelper.ts","model/tokenModel.ts","asset/logo/bep20.png","config/abiBep20Config.ts","config/abiBep20ProxyConfig.ts","service/web3Service.ts","helper/browserHelper.ts","view/controls/InputText/InputText.tsx","service/loadingService.ts","service/tokenInfoService.ts","service/tokenPoolService.ts","service/tokenPriceService.ts","view/controls/InputText/InputText.module.scss"],"names":["helper","computedLiquidity","reserve","reserveQuote","Number","utils","formatEther","computedTokenReservePricePerQuote","tokenDecimals","reserveToken","formatUnits","reservePrice","convertToInternationalCurrencySystem","currency","abs","Math","_","round","toString","convertBalanceToInternationalCurrencySystem","roundCurrency","roundedCurrency","decimal","max","floor","length","buildBurnPercent","burn","isNil","getShortAddress","adress","start","end","toLowerCase","shortAddress","slice","DApp","ABI_BEP20","anonymous","inputs","indexed","internalType","name","type","constant","outputs","payable","stateMutability","ABI_BEP20_PROXY","bscProvider","providers","JsonRpcProvider","BSC_NODE","bep20ProxyContract","Contract","BEP20_PROXY","getBep20ProxyContractSigner","wallet","proxy","signer","connect","getBep20Contract","address","getBep20ContractSigner","iOS","includes","navigator","platform","userAgent","document","InputText","props","state","onChange","bind","onClear","e","this","target","value","inputMode","className","isShowClear","placeholder","style","btnIcon","browserHelper","btnIconIOS","onClick","PureComponent","defaultProps","loadingService","showLoading","getState","loading","isLoading","dispatch","loadingCreater","hideLoading","getOutputTokenInfo","tokens","infos","isRequestError","getChunkTokenInfos","toLocaleLowerCase","toast","error","autoClose","console","log","map","token","index","symbol","decimals","tokenAction","getTokenInfo","getTokenInfos","tokenAddress","chunkAddress","chunk","CHUNK_DATA_NUMBER","chunkSymbolPromises","chunkDecimalPromises","each","push","getSymbols","getDecimals","Promise","all","chunkDatas","flatten","size","getPools","getTokenPool","newTokens","getPool","getTokenPoolReserve","busdAdressPairs","usdtAdressPairs","usdcAdressPairs","bnbAdressPairs","forEach","BUSD_BEP20","USDT_BEP20","USDC_BEP20","BNB_BEP20","adressPairs","poolAddressReserve","getChunkPools","mapTokenPoolFromReserve","bnbReservePrice","tokenHelper","last","quoteTokenAction","updateBnb","bnb","price","categorizePool","mappingCategorizePool","pancakePoolAddress","mappingPoolAddressReserve","PANCAKE","pancake","apePoolAddress","APE","ape","targetPool","maxBy","pools","chunkPoolAddressPancakePromises","chunkPoolAddressApePromises","chunkPoolReservePancakePromises","chunkPoolReserveApePromises","getPoolAddress","PANCAKE_FACTORY","APE_FACTORY","getReversesMulti","chunkLength","chunkNumber","chunkAddressPancake","chunkAddressApe","chunkReservePancake","chunkReserveApe","busd","usdt","usdc","dApp","categorizeAddressReserve","tokenIndex","quoteSymbol","quoteAddress","liquidity","filter","pool","INVALID_ADDRESS","updateTokenPrice","getTokenPrice","pancakeAdressPairs","apeAdressPairs","poolReserve","updateChunkTokenPrice","toastUpdateTokenPriceError","tokenReserve","mappingTokeReserve","newReserve","isQuotePancake","chunkPancakeAddress","chunkApeAddress","addressPairs","timer","hideProgressBar","Date","module","exports"],"mappings":"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","file":"static/js/1.86a71dc3.chunk.js","sourcesContent":["import _ from 'lodash';\r\nimport { utils, BigNumber } from 'ethers';\r\n\r\nfunction computedLiquidity(reserve: [BigNumber, BigNumber]): number {\r\n  const reserveQuote = Number(utils.formatEther(reserve[0]));\r\n\r\n  if (!reserveQuote) return 0;\r\n\r\n  return reserveQuote;\r\n}\r\n\r\nfunction computedTokenReservePricePerQuote(\r\n  reserve: [BigNumber, BigNumber],\r\n  tokenDecimals: number = 18\r\n): number {\r\n  const reserveQuote = Number(utils.formatEther(reserve[0]));\r\n  const reserveToken = Number(utils.formatUnits(reserve[1], tokenDecimals));\r\n\r\n  if (!reserveQuote || !reserveToken) return 0;\r\n\r\n  const reservePrice: number = reserveQuote / reserveToken;\r\n\r\n  return reservePrice;\r\n}\r\n\r\nfunction convertToInternationalCurrencySystem(currency: number): string {\r\n  const abs: number = Math.abs(Number(currency));\r\n  const currencySystem: string =\r\n    // Nine Zeroes for Billions\r\n    abs >= 1.0e9\r\n      ? _.round(abs / 1.0e9, 3) + 'B'\r\n      : // Six Zeroes for Millions\r\n      abs >= 1.0e6\r\n      ? _.round(abs / 1.0e6, 2) + 'M'\r\n      : // Three Zeroes for Thousands\r\n      abs >= 1.0e3\r\n      ? _.round(abs / 1.0e3, 1) + 'K'\r\n      : _.round(abs).toString();\r\n\r\n  return currencySystem;\r\n}\r\n\r\nfunction convertBalanceToInternationalCurrencySystem(currency: number): string {\r\n  const abs: number = Math.abs(Number(currency));\r\n  const currencySystem: string =\r\n    // Nine Zeroes for Billions\r\n    abs >= 1.0e9\r\n      ? _.round(abs / 1.0e9, 2) + 'B'\r\n      : // Six Zeroes for Millions\r\n      abs >= 1.0e6\r\n      ? _.round(abs / 1.0e6, 2) + 'M'\r\n      : // Five Zeroes for Thousands\r\n      abs >= 1.0e5\r\n      ? _.round(abs / 1.0e3) + 'K'\r\n      : abs >= 1.0e3\r\n      ? _.round(abs, 2).toString()\r\n      : abs >= 1.0e1\r\n      ? _.round(abs, 3).toString()\r\n      : _.round(abs, 6).toString();\r\n\r\n  return currencySystem;\r\n}\r\n\r\nfunction roundCurrency(currency: number): string {\r\n  const abs: number = Math.abs(Number(currency));\r\n  let roundedCurrency;\r\n\r\n  if (abs >= 1) {\r\n    const decimal: number = Math.max(5 - Math.floor(abs).toString().length, 2);\r\n\r\n    roundedCurrency = _.round(abs, decimal);\r\n  } else {\r\n    const decimal: number = Math.floor(1 / (abs % 1)).toString().length + 4;\r\n\r\n    roundedCurrency = _.round(abs, decimal);\r\n  }\r\n\r\n  return roundedCurrency.toString();\r\n}\r\n\r\nfunction buildBurnPercent(burn?: number): string {\r\n  if (_.isNil(burn)) {\r\n    return '';\r\n  }\r\n\r\n  if (burn === -1) {\r\n    return '?';\r\n  }\r\n\r\n  return burn + '%';\r\n}\r\n\r\nfunction getShortAddress(\r\n  adress: string = '',\r\n  start: number = 2,\r\n  end: number = 3\r\n): string {\r\n  if (adress.length <= start + end + 2) {\r\n    return adress.toLowerCase();\r\n  }\r\n\r\n  const shortAddress =\r\n    adress.slice(0, start) +\r\n    '..' +\r\n    adress.slice(adress.length - end, adress.length);\r\n\r\n  return shortAddress.toLowerCase();\r\n}\r\n\r\nconst helper = {\r\n  computedLiquidity,\r\n  computedTokenReservePricePerQuote,\r\n  convertToInternationalCurrencySystem,\r\n  convertBalanceToInternationalCurrencySystem,\r\n  roundCurrency,\r\n  buildBurnPercent,\r\n  getShortAddress,\r\n};\r\n\r\nexport default helper;\r\n","export enum DApp {\r\n  PANCAKE = 'PANCAKE',\r\n  APE = 'APE',\r\n}\r\n\r\nexport interface ITokenBase {\r\n  name: string;\r\n  symbol?: string;\r\n  address: string;\r\n  decimals?: number;\r\n  logoURI?: string;\r\n  burn?: number;\r\n  web?: string;\r\n}\r\n\r\nexport interface TimelinePrice {\r\n  price: number;\r\n  liquidity?: number;\r\n  timestamp: number;\r\n}\r\n\r\nexport interface CachePrice {\r\n  price: number;\r\n  liquidity?: number;\r\n  timelinePrices: TimelinePrice[];\r\n}\r\n\r\nexport interface IPool {\r\n  dApp?: DApp;\r\n  address: string;\r\n  quoteSymbol: string;\r\n  quoteAddress: string;\r\n  liquidity?: number;\r\n  reservePrice?: number;\r\n  reserve?: [string, string];\r\n}\r\n\r\nexport interface IVariationNotification {\r\n  cacheVariation?: number;\r\n  isPush: boolean;\r\n  hasOncePush: boolean;\r\n  timestamp: number;\r\n}\r\n\r\nexport interface ITokenDetail extends ITokenBase, ITokenPrice {\r\n  targetPool?: IPool;\r\n  pools?: IPool[];\r\n  variationNotification?: IVariationNotification;\r\n  variationNotificationFomo?: IVariationNotification;\r\n}\r\n\r\nexport interface ITokenTable {\r\n  coinTitle: string;\r\n  pool: string;\r\n  price: string;\r\n  variation: number;\r\n  division: number;\r\n  address: string;\r\n  logoURI?: string;\r\n  web?: string;\r\n}\r\n\r\ninterface ITokenPrice {\r\n  price?: number;\r\n  oldPrice?: number;\r\n  variationPrice?: number;\r\n  divisionPrice?: number;\r\n  variationLiquidity?: number;\r\n  cachePrice?: CachePrice;\r\n}\r\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACkAAAApCAIAAAAnApehAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAFGmlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNi4wLWMwMDIgNzkuMTY0NDYwLCAyMDIwLzA1LzEyLTE2OjA0OjE3ICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgMjEuMiAoTWFjaW50b3NoKSIgeG1wOkNyZWF0ZURhdGU9IjIwMjEtMTItMDFUMjI6NTc6NTYrMDc6MDAiIHhtcDpNb2RpZnlEYXRlPSIyMDIxLTEyLTAxVDIyOjU5OjM4KzA3OjAwIiB4bXA6TWV0YWRhdGFEYXRlPSIyMDIxLTEyLTAxVDIyOjU5OjM4KzA3OjAwIiBkYzpmb3JtYXQ9ImltYWdlL3BuZyIgcGhvdG9zaG9wOkNvbG9yTW9kZT0iMyIgcGhvdG9zaG9wOklDQ1Byb2ZpbGU9InNSR0IgSUVDNjE5NjYtMi4xIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjczNGJiNTE4LWRiNTYt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\"","export const ABI_BEP20 = [\r\n  // Swap (event)\r\n  {\r\n    anonymous: false,\r\n    inputs: [\r\n      {\r\n        indexed: true,\r\n        internalType: 'address',\r\n        name: 'sender',\r\n        type: 'address',\r\n      },\r\n      {\r\n        indexed: false,\r\n        internalType: 'uint256',\r\n        name: 'amount0In',\r\n        type: 'uint256',\r\n      },\r\n      {\r\n        indexed: false,\r\n        internalType: 'uint256',\r\n        name: 'amount1In',\r\n        type: 'uint256',\r\n      },\r\n      {\r\n        indexed: false,\r\n        internalType: 'uint256',\r\n        name: 'amount0Out',\r\n        type: 'uint256',\r\n      },\r\n      {\r\n        indexed: false,\r\n        internalType: 'uint256',\r\n        name: 'amount1Out',\r\n        type: 'uint256',\r\n      },\r\n      { indexed: true, internalType: 'address', name: 'to', type: 'address' },\r\n    ],\r\n    name: 'Swap',\r\n    type: 'event',\r\n  },\r\n  // token0\r\n  {\r\n    constant: true,\r\n    inputs: [],\r\n    name: 'token0',\r\n    outputs: [\r\n      {\r\n        internalType: 'address',\r\n        name: '',\r\n        type: 'address',\r\n      },\r\n    ],\r\n    payable: false,\r\n    stateMutability: 'view',\r\n    type: 'function',\r\n  },\r\n  // token1\r\n  {\r\n    constant: true,\r\n    inputs: [],\r\n    name: 'token1',\r\n    outputs: [\r\n      {\r\n        internalType: 'address',\r\n        name: '',\r\n        type: 'address',\r\n      },\r\n    ],\r\n    payable: false,\r\n    stateMutability: 'view',\r\n    type: 'function',\r\n  },\r\n  // getPair\r\n  {\r\n    constant: true,\r\n    inputs: [\r\n      {\r\n        internalType: 'address',\r\n        name: '',\r\n        type: 'address',\r\n      },\r\n      {\r\n        internalType: 'address',\r\n        name: '',\r\n        type: 'address',\r\n      },\r\n    ],\r\n    name: 'getPair',\r\n    outputs: [\r\n      {\r\n        internalType: 'address',\r\n        name: '',\r\n        type: 'address',\r\n      },\r\n    ],\r\n    payable: false,\r\n    stateMutability: 'view',\r\n    type: 'function',\r\n  },\r\n  // getReserves\r\n  {\r\n    constant: true,\r\n    inputs: [],\r\n    name: 'getReserves',\r\n    outputs: [\r\n      {\r\n        internalType: 'uint112',\r\n        name: '_reserve0',\r\n        type: 'uint112',\r\n      },\r\n      {\r\n        internalType: 'uint112',\r\n        name: '_reserve1',\r\n        type: 'uint112',\r\n      },\r\n      {\r\n        internalType: 'uint32',\r\n        name: '_blockTimestampLast',\r\n        type: 'uint32',\r\n      },\r\n    ],\r\n    payable: false,\r\n    stateMutability: 'view',\r\n    type: 'function',\r\n  },\r\n  // balanceOf\r\n  {\r\n    constant: true,\r\n    inputs: [{ internalType: 'address', name: 'account', type: 'address' }],\r\n    name: 'balanceOf',\r\n    outputs: [{ internalType: 'uint256', name: '', type: 'uint256' }],\r\n    payable: false,\r\n    stateMutability: 'view',\r\n    type: 'function',\r\n  },\r\n  // allowance\r\n  {\r\n    inputs: [\r\n      {\r\n        internalType: 'address',\r\n        name: 'owner', // my address\r\n        type: 'address',\r\n      },\r\n      {\r\n        internalType: 'address',\r\n        name: 'spender', // proxy\r\n        type: 'address',\r\n      },\r\n    ],\r\n    name: 'allowance',\r\n    outputs: [\r\n      {\r\n        internalType: 'uint256',\r\n        name: '',\r\n        type: 'uint256',\r\n      },\r\n    ],\r\n    stateMutability: 'view',\r\n    type: 'function',\r\n  },\r\n  // approve\r\n  {\r\n    constant: false,\r\n    inputs: [\r\n      {\r\n        internalType: 'address',\r\n        name: 'spender', // proxy\r\n        type: 'address',\r\n      },\r\n      {\r\n        internalType: 'uint256',\r\n        name: 'value',\r\n        type: 'uint256',\r\n      },\r\n    ],\r\n    name: 'approve',\r\n    outputs: [\r\n      {\r\n        internalType: 'bool',\r\n        name: '',\r\n        type: 'bool',\r\n      },\r\n    ],\r\n    payable: false,\r\n    stateMutability: 'nonpayable',\r\n    type: 'function',\r\n  },\r\n];\r\n","export const ABI_BEP20_PROXY = [\r\n  // getSymbols\r\n  {\r\n    inputs: [\r\n      {\r\n        internalType: 'address[]',\r\n        name: 'tokens',\r\n        type: 'address[]',\r\n      },\r\n    ],\r\n    name: 'getSymbols',\r\n    outputs: [\r\n      {\r\n        internalType: 'string[]',\r\n        name: 'symbols',\r\n        type: 'string[]',\r\n      },\r\n    ],\r\n    stateMutability: 'view',\r\n    type: 'function',\r\n    constant: true,\r\n  },\r\n  // getDecimals\r\n  {\r\n    inputs: [\r\n      {\r\n        internalType: 'address[]',\r\n        name: 'tokens',\r\n        type: 'address[]',\r\n      },\r\n    ],\r\n    name: 'getDecimals',\r\n    outputs: [\r\n      {\r\n        internalType: 'uint8[]',\r\n        name: 'decimals',\r\n        type: 'uint8[]',\r\n      },\r\n    ],\r\n    stateMutability: 'view',\r\n    type: 'function',\r\n    constant: true,\r\n  },\r\n  // getPoolAddress\r\n  {\r\n    inputs: [\r\n      {\r\n        internalType: 'address',\r\n        name: 'factory',\r\n        type: 'address',\r\n      },\r\n      {\r\n        internalType: 'address[2][]',\r\n        name: 'pairs',\r\n        type: 'address[2][]',\r\n      },\r\n    ],\r\n    name: 'getPoolAddress',\r\n    outputs: [\r\n      {\r\n        internalType: 'address[]',\r\n        name: 'poolAddress',\r\n        type: 'address[]',\r\n      },\r\n    ],\r\n    stateMutability: 'view',\r\n    type: 'function',\r\n    constant: true,\r\n  },\r\n  // getReversesMulti\r\n  {\r\n    inputs: [\r\n      {\r\n        internalType: 'address',\r\n        name: 'factory',\r\n        type: 'address',\r\n      },\r\n      {\r\n        internalType: 'address[2][]',\r\n        name: 'pairs',\r\n        type: 'address[2][]',\r\n      },\r\n    ],\r\n    name: 'getReversesMulti',\r\n    outputs: [\r\n      {\r\n        internalType: 'uint112[2][]',\r\n        name: 'reserves',\r\n        type: 'uint112[2][]',\r\n      },\r\n    ],\r\n    stateMutability: 'view',\r\n    type: 'function',\r\n    constant: true,\r\n  },\r\n  // swapExactTokensForTokens\r\n  {\r\n    inputs: [\r\n      {\r\n        internalType: 'address',\r\n        name: 'factory', // factory AMM\r\n        type: 'address',\r\n      },\r\n      {\r\n        internalType: 'bytes32',\r\n        name: 'hashCode', // hashCode AMM\r\n        type: 'bytes32',\r\n      },\r\n      {\r\n        internalType: 'uint256',\r\n        name: 'amountIn', // value x10^decimal\r\n        type: 'uint256',\r\n      },\r\n      {\r\n        internalType: 'uint256',\r\n        name: 'amountOutMin', // include slip, tax\r\n        type: 'uint256',\r\n      },\r\n      {\r\n        internalType: 'address[]',\r\n        name: 'path',\r\n        type: 'address[]',\r\n      },\r\n      {\r\n        internalType: 'address',\r\n        name: 'to', // wallet address\r\n        type: 'address',\r\n      },\r\n    ],\r\n    name: 'swapExactTokensForTokens',\r\n    outputs: [\r\n      {\r\n        internalType: 'uint256[]',\r\n        name: 'amounts',\r\n        type: 'uint256[]',\r\n      },\r\n    ],\r\n    stateMutability: 'nonpayable',\r\n    type: 'function',\r\n  },\r\n  // swapExactTokensForTokensSupportingFeeOnTransferTokens\r\n  {\r\n    inputs: [\r\n      {\r\n        internalType: 'address',\r\n        name: 'factory',\r\n        type: 'address',\r\n      },\r\n      {\r\n        internalType: 'bytes32',\r\n        name: 'hashCode',\r\n        type: 'bytes32',\r\n      },\r\n      {\r\n        internalType: 'uint256',\r\n        name: 'amountIn',\r\n        type: 'uint256',\r\n      },\r\n      {\r\n        internalType: 'uint256',\r\n        name: 'amountOutMin',\r\n        type: 'uint256',\r\n      },\r\n      {\r\n        internalType: 'address[]',\r\n        name: 'path',\r\n        type: 'address[]',\r\n      },\r\n      {\r\n        internalType: 'address',\r\n        name: 'to',\r\n        type: 'address',\r\n      },\r\n    ],\r\n    name: 'swapExactTokensForTokensSupportingFeeOnTransferTokens',\r\n    outputs: [],\r\n    stateMutability: 'nonpayable',\r\n    type: 'function',\r\n  },\r\n  // swapExactBNBForTokens\r\n  {\r\n    inputs: [\r\n      {\r\n        internalType: 'address',\r\n        name: 'factory',\r\n        type: 'address',\r\n      },\r\n      {\r\n        internalType: 'bytes32',\r\n        name: 'hashCode',\r\n        type: 'bytes32',\r\n      },\r\n      {\r\n        internalType: 'uint256',\r\n        name: 'amountOutMin',\r\n        type: 'uint256',\r\n      },\r\n      {\r\n        internalType: 'address[]',\r\n        name: 'path',\r\n        type: 'address[]',\r\n      },\r\n      {\r\n        internalType: 'address',\r\n        name: 'to',\r\n        type: 'address',\r\n      },\r\n    ],\r\n    name: 'swapExactBNBForTokens',\r\n    outputs: [\r\n      {\r\n        internalType: 'uint256[]',\r\n        name: 'amounts',\r\n        type: 'uint256[]',\r\n      },\r\n    ],\r\n    stateMutability: 'payable',\r\n    type: 'function',\r\n    payable: true,\r\n  },\r\n  // swapExactBNBForTokensSupportingFeeOnTransferTokens\r\n  {\r\n    inputs: [\r\n      {\r\n        internalType: 'address',\r\n        name: 'factory',\r\n        type: 'address',\r\n      },\r\n      {\r\n        internalType: 'bytes32',\r\n        name: 'hashCode',\r\n        type: 'bytes32',\r\n      },\r\n      {\r\n        internalType: 'uint256',\r\n        name: 'amountOutMin',\r\n        type: 'uint256',\r\n      },\r\n      {\r\n        internalType: 'address[]',\r\n        name: 'path',\r\n        type: 'address[]',\r\n      },\r\n      {\r\n        internalType: 'address',\r\n        name: 'to',\r\n        type: 'address',\r\n      },\r\n    ],\r\n    name: 'swapExactBNBForTokensSupportingFeeOnTransferTokens',\r\n    outputs: [],\r\n    stateMutability: 'payable',\r\n    type: 'function',\r\n    payable: true,\r\n  },\r\n  // swapExactTokensForBNB\r\n  {\r\n    inputs: [\r\n      {\r\n        internalType: 'address',\r\n        name: 'factory',\r\n        type: 'address',\r\n      },\r\n      {\r\n        internalType: 'bytes32',\r\n        name: 'hashCode',\r\n        type: 'bytes32',\r\n      },\r\n      {\r\n        internalType: 'uint256',\r\n        name: 'amountIn',\r\n        type: 'uint256',\r\n      },\r\n      {\r\n        internalType: 'uint256',\r\n        name: 'amountOutMin',\r\n        type: 'uint256',\r\n      },\r\n      {\r\n        internalType: 'address[]',\r\n        name: 'path',\r\n        type: 'address[]',\r\n      },\r\n      {\r\n        internalType: 'address',\r\n        name: 'to',\r\n        type: 'address',\r\n      },\r\n    ],\r\n    name: 'swapExactTokensForBNB',\r\n    outputs: [\r\n      {\r\n        internalType: 'uint256[]',\r\n        name: 'amounts',\r\n        type: 'uint256[]',\r\n      },\r\n    ],\r\n    stateMutability: 'nonpayable',\r\n    type: 'function',\r\n  },\r\n  // swapExactTokensForBNBSupportingFeeOnTransferTokens\r\n  {\r\n    inputs: [\r\n      {\r\n        internalType: 'address',\r\n        name: 'factory',\r\n        type: 'address',\r\n      },\r\n      {\r\n        internalType: 'bytes32',\r\n        name: 'hashCode',\r\n        type: 'bytes32',\r\n      },\r\n      {\r\n        internalType: 'uint256',\r\n        name: 'amountIn',\r\n        type: 'uint256',\r\n      },\r\n      {\r\n        internalType: 'uint256',\r\n        name: 'amountOutMin',\r\n        type: 'uint256',\r\n      },\r\n      {\r\n        internalType: 'address[]',\r\n        name: 'path',\r\n        type: 'address[]',\r\n      },\r\n      {\r\n        internalType: 'address',\r\n        name: 'to',\r\n        type: 'address',\r\n      },\r\n    ],\r\n    name: 'swapExactTokensForBNBSupportingFeeOnTransferTokens',\r\n    outputs: [],\r\n    stateMutability: 'nonpayable',\r\n    type: 'function',\r\n  },\r\n];\r\n","import { providers, Contract, Wallet, Signer } from 'ethers';\r\nimport { ABI_BEP20 } from '../config/abiBep20Config';\r\nimport { ABI_BEP20_PROXY } from '../config/abiBep20ProxyConfig';\r\nimport { BSC_NODE, BEP20_PROXY } from '../config/web3Config';\r\n\r\nexport const bscProvider = new providers.JsonRpcProvider(BSC_NODE);\r\n\r\nexport const bep20ProxyContract: Contract = new Contract(\r\n  BEP20_PROXY,\r\n  ABI_BEP20_PROXY,\r\n  bscProvider\r\n);\r\n\r\nexport function getBep20ProxyContractSigner(\r\n  wallet: Wallet,\r\n  proxy: string = BEP20_PROXY\r\n): Contract {\r\n  const signer: Signer = wallet.connect(bscProvider);\r\n\r\n  return new Contract(proxy, ABI_BEP20_PROXY, signer);\r\n}\r\n\r\nexport function getBep20Contract(address: string): Contract {\r\n  return new Contract(address, ABI_BEP20, bscProvider);\r\n}\r\n\r\nexport function getBep20ContractSigner(\r\n  address: string,\r\n  wallet: Wallet\r\n): Contract {\r\n  const signer: Signer = wallet.connect(bscProvider);\r\n\r\n  return new Contract(address, ABI_BEP20, signer);\r\n}\r\n","function iOS(): boolean {\r\n  return (\r\n    [\r\n      'iPad Simulator',\r\n      'iPhone Simulator',\r\n      'iPod Simulator',\r\n      'iPad',\r\n      'iPhone',\r\n      'iPod',\r\n    ].includes(navigator.platform) ||\r\n    // iPad on iOS 13 detection\r\n    (navigator.userAgent.includes('Mac') && 'ontouchend' in document)\r\n  );\r\n}\r\n\r\nconst helper = {\r\n  iOS,\r\n};\r\n\r\nexport default helper;\r\n","import { PureComponent, ReactElement, ChangeEvent } from 'react';\r\nimport browserHelper from '../../../helper/browserHelper';\r\nimport style from './InputText.module.scss';\r\n\r\ninterface IStoreProps {}\r\ninterface IHOCProps {}\r\ninterface IOwnProps {\r\n  inputMode:\r\n    | 'text'\r\n    | 'search'\r\n    | 'none'\r\n    | 'tel'\r\n    | 'url'\r\n    | 'email'\r\n    | 'numeric'\r\n    | 'decimal';\r\n  type: 'text' | 'password';\r\n  className: string;\r\n  isShowClear: boolean;\r\n  placeholder: string;\r\n  value: string;\r\n  onChange: (v: string) => void;\r\n}\r\ninterface IOwnState {}\r\n\r\nclass InputText extends PureComponent<\r\n  IStoreProps & IHOCProps & IOwnProps,\r\n  IOwnState\r\n> {\r\n  static defaultProps = {\r\n    inputMode: 'text',\r\n    type: 'text',\r\n    className: '',\r\n    isShowClear: false,\r\n    placeholder: '',\r\n    value: '',\r\n    onChange: () => {},\r\n  };\r\n\r\n  state: IOwnState;\r\n\r\n  constructor(props: IOwnProps & IHOCProps & IStoreProps) {\r\n    super(props);\r\n\r\n    this.state = {};\r\n\r\n    this.onChange = this.onChange.bind(this);\r\n    this.onClear = this.onClear.bind(this);\r\n  }\r\n\r\n  onChange(e: ChangeEvent<HTMLInputElement>) {\r\n    this.props.onChange(e.target.value);\r\n  }\r\n\r\n  onClear() {\r\n    this.props.onChange('');\r\n  }\r\n\r\n  render(): ReactElement {\r\n    const { inputMode, type, className, isShowClear, placeholder, value } =\r\n      this.props;\r\n\r\n    return (\r\n      <div className='position-relative'>\r\n        <input\r\n          inputMode={inputMode}\r\n          type={type}\r\n          className={'fk-input' + (className ? ` ${className}` : '')}\r\n          placeholder={placeholder}\r\n          value={value}\r\n          onChange={this.onChange}\r\n        />\r\n        {isShowClear && !!value && (\r\n          <button\r\n            className={\r\n              'fk-button-icon ' +\r\n              style.btnIcon +\r\n              (browserHelper.iOS() ? ` ${style.btnIconIOS}` : '')\r\n            }\r\n            onClick={this.onClear}\r\n          >\r\n            <i className='bi bi-x-lg'></i>\r\n          </button>\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default InputText;\r\n","import { dispatch, getState } from '../store/config/store';\r\nimport loadingCreater from '../store/loadingActionCreater';\r\n\r\nexport const showLoading = () => {\r\n  if (getState().loading?.isLoading) {\r\n    return;\r\n  }\r\n\r\n  dispatch(loadingCreater.showLoading());\r\n};\r\n\r\nexport const hideLoading = () => {\r\n  if (!getState().loading?.isLoading) {\r\n    return;\r\n  }\r\n\r\n  dispatch(loadingCreater.hideLoading());\r\n};\r\n\r\nconst loadingService = { showLoading, hideLoading };\r\n\r\nexport default loadingService;\r\n","import _ from 'lodash';\r\nimport { toast } from 'react-toastify';\r\nimport { CHUNK_DATA_NUMBER } from '../config/appConfig';\r\nimport { bep20ProxyContract } from './web3Service';\r\nimport { getState, dispatch } from '../store/config/store';\r\nimport tokenAction from '../store/tokenActionCreater';\r\nimport { ITokenDetail } from '../model/tokenModel';\r\n\r\nexport async function getOutputTokenInfo(address: string) {\r\n  let tokens: ITokenDetail[] = getState().tokens;\r\n  let infos: [string[], number[]] = [[], []];\r\n  let isRequestError = false;\r\n\r\n  try {\r\n    infos = await getChunkTokenInfos([address.toLocaleLowerCase()]);\r\n  } catch (error) {\r\n    isRequestError = true;\r\n    toast.error('Get pair swap token info failure!', { autoClose: 500 });\r\n    console.log(error);\r\n  }\r\n\r\n  if (isRequestError) {\r\n    return;\r\n  }\r\n\r\n  tokens = tokens.map(\r\n    (token: ITokenDetail, index: number): ITokenDetail => {\r\n      if (token.address.toLocaleLowerCase() !== address.toLocaleLowerCase()) return token;\r\n\r\n      return ({\r\n        ...token,\r\n        symbol: infos[0][0],\r\n        decimals: infos[1][0],\r\n      })\r\n    }\r\n  );\r\n\r\n  dispatch(tokenAction.getTokenInfo(tokens));\r\n}\r\n\r\nexport async function getTokenInfos() {\r\n  let tokens: ITokenDetail[] = getState().tokens;\r\n  const tokenAddress: string[] = tokens.map(\r\n    (token: ITokenDetail) => token.address\r\n  );\r\n\r\n  let infos: [string[], number[]] = [[], []];\r\n  let isRequestError = false;\r\n\r\n  try {\r\n    infos = await getChunkTokenInfos(tokenAddress);\r\n  } catch (error) {\r\n    isRequestError = true;\r\n    toast.error('Get token info failure!', { autoClose: 500 });\r\n    console.log(error);\r\n  }\r\n\r\n  if (isRequestError) {\r\n    return;\r\n  }\r\n\r\n  tokens = tokens.map(\r\n    (token: ITokenDetail, index: number): ITokenDetail => ({\r\n      ...token,\r\n      symbol: infos[0][index],\r\n      decimals: infos[1][index],\r\n    })\r\n  );\r\n\r\n  dispatch(tokenAction.getTokenInfo(tokens));\r\n}\r\n\r\nasync function getChunkTokenInfos(\r\n  tokenAddress: string[]\r\n): Promise<[string[], number[]]> {\r\n  const chunkAddress: string[][] = _.chunk(tokenAddress, CHUNK_DATA_NUMBER);\r\n  let chunkSymbolPromises: Promise<any>[] = [];\r\n  let chunkDecimalPromises: Promise<any>[] = [];\r\n\r\n  _.each(chunkAddress, (address: string[]) => {\r\n    chunkSymbolPromises.push(bep20ProxyContract.getSymbols(address));\r\n    chunkDecimalPromises.push(bep20ProxyContract.getDecimals(address));\r\n  });\r\n\r\n  const chunkDatas = await Promise.all([\r\n    ...chunkSymbolPromises,\r\n    ...chunkDecimalPromises,\r\n  ]);\r\n  const infos: [string[], number[]] = [\r\n    _.flatten(_.slice(chunkDatas, 0, _.size(chunkDatas) / 2) as string[][]),\r\n    _.flatten(_.slice(chunkDatas, _.size(chunkDatas) / 2) as number[][]),\r\n  ];\r\n\r\n  return infos;\r\n}\r\n","import _ from 'lodash';\r\nimport { utils, BigNumber } from 'ethers';\r\nimport { toast } from 'react-toastify';\r\nimport { CHUNK_DATA_NUMBER } from '../config/appConfig';\r\nimport {\r\n  BUSD_BEP20,\r\n  USDT_BEP20,\r\n  USDC_BEP20,\r\n  BNB_BEP20,\r\n} from '../config/tokenBep20Config';\r\nimport {\r\n  PANCAKE_FACTORY,\r\n  APE_FACTORY,\r\n  INVALID_ADDRESS,\r\n} from '../config/web3Config';\r\nimport tokenHelper from '../helper/tokenHelper';\r\nimport { bep20ProxyContract } from './web3Service';\r\nimport { dispatch, getState } from '../store/config/store';\r\nimport quoteTokenAction from '../store/quoteTokenActionCreater';\r\nimport tokenAction from '../store/tokenActionCreater';\r\nimport { DApp, IPool, ITokenDetail } from '../model/tokenModel';\r\n\r\nexport type TPoolAddressReserve = [\r\n  string[],\r\n  string[],\r\n  [BigNumber, BigNumber][],\r\n  [BigNumber, BigNumber][]\r\n];\r\n\r\ntype AddressReserve = {\r\n  address: string[];\r\n  reserve: [BigNumber, BigNumber][];\r\n};\r\n\r\ntype TCategorizeAddressReserve = {\r\n  busd: AddressReserve;\r\n  usdt: AddressReserve;\r\n  usdc: AddressReserve;\r\n  bnb: AddressReserve;\r\n};\r\n\r\ntype TCategorizePool = {\r\n  pancake: TCategorizeAddressReserve;\r\n  ape: TCategorizeAddressReserve;\r\n};\r\n\r\nexport async function getPools() {\r\n  const tokens: ITokenDetail[] = getState().tokens;\r\n  const newTokens: ITokenDetail[] = await getTokenPool(tokens);\r\n\r\n  dispatch(tokenAction.getPool(newTokens));\r\n}\r\n\r\nexport async function getTokenPoolReserve(\r\n  tokens: ITokenDetail[]\r\n): Promise<TPoolAddressReserve> {\r\n  if (_.size(tokens) === 0) {\r\n    return [[], [], [], []];\r\n  }\r\n\r\n  let busdAdressPairs: [string, string][] = [];\r\n  let usdtAdressPairs: [string, string][] = [];\r\n  let usdcAdressPairs: [string, string][] = [];\r\n  let bnbAdressPairs: [string, string][] = [];\r\n  let adressPairs: [string, string][] = [];\r\n\r\n  tokens.forEach((token: ITokenDetail) => {\r\n    busdAdressPairs.push([BUSD_BEP20.address, token.address]);\r\n    usdtAdressPairs.push([USDT_BEP20.address, token.address]);\r\n    usdcAdressPairs.push([USDC_BEP20.address, token.address]);\r\n    bnbAdressPairs.push([BNB_BEP20.address, token.address]);\r\n  });\r\n\r\n  adressPairs = [\r\n    ...busdAdressPairs,\r\n    ...usdtAdressPairs,\r\n    ...usdcAdressPairs,\r\n    ...bnbAdressPairs,\r\n  ];\r\n\r\n  let poolAddressReserve: TPoolAddressReserve = [[], [], [], []];\r\n  let isRequestError = false;\r\n\r\n  try {\r\n    poolAddressReserve = await getChunkPools(adressPairs);\r\n  } catch (error) {\r\n    isRequestError = true;\r\n    toast.error('Get token pool failure!');\r\n    console.log(error);\r\n  }\r\n\r\n  if (isRequestError) {\r\n    return await getTokenPoolReserve(tokens);\r\n  }\r\n\r\n  return poolAddressReserve;\r\n}\r\n\r\nexport function mapTokenPoolFromReserve(\r\n  tokens: ITokenDetail[],\r\n  poolAddressReserve: TPoolAddressReserve\r\n): ITokenDetail[] {\r\n  if (_.size(tokens) === 0) {\r\n    return tokens;\r\n  }\r\n\r\n  let newTokens: ITokenDetail[];\r\n  const bnbReservePrice = tokenHelper.computedTokenReservePricePerQuote(\r\n    _.last(poolAddressReserve[2]) as [BigNumber, BigNumber]\r\n  );\r\n  dispatch(quoteTokenAction.updateBnb({ bnb: { price: bnbReservePrice } }));\r\n\r\n  const categorizePool: TCategorizePool = mappingCategorizePool(\r\n    poolAddressReserve,\r\n    tokens.length\r\n  );\r\n\r\n  newTokens = tokens.map((token: ITokenDetail, index: number): ITokenDetail => {\r\n    const pancakePoolAddress: IPool[] = mappingPoolAddressReserve(\r\n      DApp.PANCAKE,\r\n      categorizePool.pancake,\r\n      index,\r\n      token.decimals as number,\r\n      bnbReservePrice\r\n    );\r\n    const apePoolAddress: IPool[] = mappingPoolAddressReserve(\r\n      DApp.APE,\r\n      categorizePool.ape,\r\n      index,\r\n      token.decimals as number,\r\n      bnbReservePrice\r\n    );\r\n    const targetPool: IPool = _.maxBy(\r\n      [...pancakePoolAddress, ...apePoolAddress],\r\n      'liquidity'\r\n    ) as IPool;\r\n\r\n    return {\r\n      ...token,\r\n      price: targetPool.reservePrice,\r\n      targetPool,\r\n      pools: [...pancakePoolAddress, ...apePoolAddress],\r\n    };\r\n  });\r\n\r\n  return newTokens;\r\n}\r\n\r\nexport async function getTokenPool(\r\n  tokens: ITokenDetail[]\r\n): Promise<ITokenDetail[]> {\r\n  if (_.size(tokens) === 0) {\r\n    return tokens;\r\n  }\r\n\r\n  let newTokens: ITokenDetail[];\r\n  let busdAdressPairs: [string, string][] = [];\r\n  let usdtAdressPairs: [string, string][] = [];\r\n  let usdcAdressPairs: [string, string][] = [];\r\n  let bnbAdressPairs: [string, string][] = [];\r\n  let adressPairs: [string, string][] = [];\r\n\r\n  tokens.forEach((token: ITokenDetail) => {\r\n    busdAdressPairs.push([BUSD_BEP20.address, token.address]);\r\n    usdtAdressPairs.push([USDT_BEP20.address, token.address]);\r\n    usdcAdressPairs.push([USDC_BEP20.address, token.address]);\r\n    bnbAdressPairs.push([BNB_BEP20.address, token.address]);\r\n  });\r\n\r\n  adressPairs = [\r\n    ...busdAdressPairs,\r\n    ...usdtAdressPairs,\r\n    ...usdcAdressPairs,\r\n    ...bnbAdressPairs,\r\n  ];\r\n\r\n  let poolAddressReserve: TPoolAddressReserve = [[], [], [], []];\r\n  let isRequestError = false;\r\n\r\n  try {\r\n    poolAddressReserve = await getChunkPools(adressPairs);\r\n  } catch (error) {\r\n    isRequestError = true;\r\n    toast.error('Get token pool failure!');\r\n    console.log(error);\r\n  }\r\n\r\n  if (isRequestError) {\r\n    return await getTokenPool(tokens);\r\n  }\r\n\r\n  const bnbReservePrice = tokenHelper.computedTokenReservePricePerQuote(\r\n    _.last(poolAddressReserve[2]) as [BigNumber, BigNumber]\r\n  );\r\n  dispatch(quoteTokenAction.updateBnb({ bnb: { price: bnbReservePrice } }));\r\n\r\n  const categorizePool: TCategorizePool = mappingCategorizePool(\r\n    poolAddressReserve,\r\n    tokens.length\r\n  );\r\n\r\n  newTokens = tokens.map((token: ITokenDetail, index: number): ITokenDetail => {\r\n    const pancakePoolAddress: IPool[] = mappingPoolAddressReserve(\r\n      DApp.PANCAKE,\r\n      categorizePool.pancake,\r\n      index,\r\n      token.decimals as number,\r\n      bnbReservePrice\r\n    );\r\n    const apePoolAddress: IPool[] = mappingPoolAddressReserve(\r\n      DApp.APE,\r\n      categorizePool.ape,\r\n      index,\r\n      token.decimals as number,\r\n      bnbReservePrice\r\n    );\r\n    const targetPool: IPool = _.maxBy(\r\n      [...pancakePoolAddress, ...apePoolAddress],\r\n      'liquidity'\r\n    ) as IPool;\r\n\r\n    return {\r\n      ...token,\r\n      price: targetPool.reservePrice,\r\n      targetPool,\r\n      pools: [...pancakePoolAddress, ...apePoolAddress],\r\n    };\r\n  });\r\n\r\n  return newTokens;\r\n}\r\n\r\nasync function getChunkPools(\r\n  adressPairs: [string, string][]\r\n): Promise<TPoolAddressReserve> {\r\n  const chunkAddress: [string, string][][] = _.chunk(\r\n    adressPairs,\r\n    CHUNK_DATA_NUMBER\r\n  );\r\n  let chunkPoolAddressPancakePromises: Promise<any>[] = [];\r\n  let chunkPoolAddressApePromises: Promise<any>[] = [];\r\n  let chunkPoolReservePancakePromises: Promise<any>[] = [];\r\n  let chunkPoolReserveApePromises: Promise<any>[] = [];\r\n\r\n  _.each(chunkAddress, (address: [string, string][]) => {\r\n    chunkPoolAddressPancakePromises.push(\r\n      bep20ProxyContract.getPoolAddress(PANCAKE_FACTORY, address)\r\n    );\r\n    chunkPoolAddressApePromises.push(\r\n      bep20ProxyContract.getPoolAddress(APE_FACTORY, address)\r\n    );\r\n    chunkPoolReservePancakePromises.push(\r\n      bep20ProxyContract.getReversesMulti(PANCAKE_FACTORY, address)\r\n    );\r\n    chunkPoolReserveApePromises.push(\r\n      bep20ProxyContract.getReversesMulti(APE_FACTORY, address)\r\n    );\r\n  });\r\n\r\n  const chunkDatas = await Promise.all([\r\n    ...chunkPoolAddressPancakePromises,\r\n    ...chunkPoolAddressApePromises,\r\n    ...chunkPoolReservePancakePromises,\r\n    ...chunkPoolReserveApePromises,\r\n    bep20ProxyContract.getReversesMulti(PANCAKE_FACTORY, [\r\n      [BUSD_BEP20.address, BNB_BEP20.address],\r\n    ]),\r\n  ]);\r\n  const chunkLength: number = (_.size(chunkDatas) - 1) / 4;\r\n  const poolAddressReserve: TPoolAddressReserve = [\r\n    _.flatten(_.slice(chunkDatas, 0, chunkLength) as string[][]),\r\n    _.flatten(_.slice(chunkDatas, chunkLength, chunkLength * 2) as string[][]),\r\n    _.flatten([\r\n      ..._.slice(chunkDatas, chunkLength * 2, chunkLength * 3),\r\n      _.last(chunkDatas),\r\n    ] as [BigNumber, BigNumber][][]),\r\n    _.flatten(\r\n      _.slice(chunkDatas, chunkLength * 3, chunkLength * 4) as [\r\n        BigNumber,\r\n        BigNumber\r\n      ][][]\r\n    ),\r\n  ];\r\n\r\n  return poolAddressReserve;\r\n}\r\n\r\nfunction mappingCategorizePool(\r\n  poolAddressReserve: TPoolAddressReserve,\r\n  chunkNumber: number\r\n): TCategorizePool {\r\n  const chunkAddressPancake = _.chunk(poolAddressReserve[0], chunkNumber);\r\n  const chunkAddressApe = _.chunk(poolAddressReserve[1], chunkNumber);\r\n  const chunkReservePancake = _.chunk(poolAddressReserve[2], chunkNumber);\r\n  const chunkReserveApe = _.chunk(poolAddressReserve[3], chunkNumber);\r\n\r\n  const categorizePool: TCategorizePool = {\r\n    pancake: {\r\n      busd: {\r\n        address: chunkAddressPancake[0],\r\n        reserve: chunkReservePancake[0],\r\n      },\r\n      usdt: {\r\n        address: chunkAddressPancake[1],\r\n        reserve: chunkReservePancake[1],\r\n      },\r\n      usdc: {\r\n        address: chunkAddressPancake[2],\r\n        reserve: chunkReservePancake[2],\r\n      },\r\n      bnb: {\r\n        address: chunkAddressPancake[3],\r\n        reserve: chunkReservePancake[3],\r\n      },\r\n    },\r\n    ape: {\r\n      busd: {\r\n        address: chunkAddressApe[0],\r\n        reserve: chunkReserveApe[0],\r\n      },\r\n      usdt: {\r\n        address: chunkAddressApe[1],\r\n        reserve: chunkReserveApe[1],\r\n      },\r\n      usdc: {\r\n        address: chunkAddressApe[2],\r\n        reserve: chunkReserveApe[2],\r\n      },\r\n      bnb: {\r\n        address: chunkAddressApe[3],\r\n        reserve: chunkReserveApe[3],\r\n      },\r\n    },\r\n  };\r\n\r\n  return categorizePool;\r\n}\r\n\r\nfunction mappingPoolAddressReserve(\r\n  dApp: DApp,\r\n  categorizeAddressReserve: TCategorizeAddressReserve,\r\n  tokenIndex: number,\r\n  tokenDecimals: number,\r\n  bnbReservePrice: number\r\n): IPool[] {\r\n  let pools: IPool[] = [\r\n    {\r\n      dApp,\r\n      address: categorizeAddressReserve.busd.address[tokenIndex].toLowerCase(),\r\n      quoteSymbol: BUSD_BEP20.symbol as string,\r\n      quoteAddress: BUSD_BEP20.address,\r\n      liquidity: tokenHelper.computedLiquidity(\r\n        categorizeAddressReserve.busd.reserve[tokenIndex]\r\n      ),\r\n      reservePrice: tokenHelper.computedTokenReservePricePerQuote(\r\n        categorizeAddressReserve.busd.reserve[tokenIndex],\r\n        tokenDecimals\r\n      ),\r\n      reserve: [\r\n        utils.formatEther(categorizeAddressReserve.busd.reserve[tokenIndex][0]),\r\n        utils.formatUnits(\r\n          categorizeAddressReserve.busd.reserve[tokenIndex][1],\r\n          tokenDecimals\r\n        ),\r\n      ],\r\n    },\r\n    {\r\n      dApp,\r\n      address: categorizeAddressReserve.usdt.address[tokenIndex].toLowerCase(),\r\n      quoteSymbol: USDT_BEP20.symbol as string,\r\n      quoteAddress: USDT_BEP20.address,\r\n      liquidity: tokenHelper.computedLiquidity(\r\n        categorizeAddressReserve.usdt.reserve[tokenIndex]\r\n      ),\r\n      reservePrice: tokenHelper.computedTokenReservePricePerQuote(\r\n        categorizeAddressReserve.usdt.reserve[tokenIndex],\r\n        tokenDecimals\r\n      ),\r\n      reserve: [\r\n        utils.formatEther(categorizeAddressReserve.usdt.reserve[tokenIndex][0]),\r\n        utils.formatUnits(\r\n          categorizeAddressReserve.usdt.reserve[tokenIndex][1],\r\n          tokenDecimals\r\n        ),\r\n      ],\r\n    },\r\n    {\r\n      dApp,\r\n      address: categorizeAddressReserve.usdc.address[tokenIndex].toLowerCase(),\r\n      quoteSymbol: USDC_BEP20.symbol as string,\r\n      quoteAddress: USDC_BEP20.address,\r\n      liquidity: tokenHelper.computedLiquidity(\r\n        categorizeAddressReserve.usdc.reserve[tokenIndex]\r\n      ),\r\n      reservePrice: tokenHelper.computedTokenReservePricePerQuote(\r\n        categorizeAddressReserve.usdc.reserve[tokenIndex],\r\n        tokenDecimals\r\n      ),\r\n      reserve: [\r\n        utils.formatEther(categorizeAddressReserve.usdc.reserve[tokenIndex][0]),\r\n        utils.formatUnits(\r\n          categorizeAddressReserve.usdc.reserve[tokenIndex][1],\r\n          tokenDecimals\r\n        ),\r\n      ],\r\n    },\r\n    {\r\n      dApp,\r\n      address: categorizeAddressReserve.bnb.address[tokenIndex].toLowerCase(),\r\n      quoteSymbol: BNB_BEP20.symbol as string,\r\n      quoteAddress: BNB_BEP20.address,\r\n      liquidity:\r\n        tokenHelper.computedLiquidity(\r\n          categorizeAddressReserve.bnb.reserve[tokenIndex]\r\n        ) * bnbReservePrice,\r\n      reservePrice:\r\n        tokenHelper.computedTokenReservePricePerQuote(\r\n          categorizeAddressReserve.bnb.reserve[tokenIndex],\r\n          tokenDecimals\r\n        ) * bnbReservePrice,\r\n      reserve: [\r\n        utils.formatEther(categorizeAddressReserve.bnb.reserve[tokenIndex][0]),\r\n        utils.formatUnits(\r\n          categorizeAddressReserve.bnb.reserve[tokenIndex][1],\r\n          tokenDecimals\r\n        ),\r\n      ],\r\n    },\r\n  ];\r\n\r\n  pools = pools.filter(\r\n    (pool: IPool): boolean => pool.address !== INVALID_ADDRESS\r\n  );\r\n\r\n  return pools;\r\n}\r\n","import _ from 'lodash';\r\nimport { Contract, Event, EventFilter, utils, BigNumber } from 'ethers';\r\nimport { toast } from 'react-toastify';\r\nimport { CHUNK_DATA_NUMBER } from '../config/appConfig';\r\nimport {\r\n  BUSD_BEP20,\r\n  USDT_BEP20,\r\n  USDC_BEP20,\r\n  BNB_BEP20,\r\n} from '../config/tokenBep20Config';\r\nimport {\r\n  PANCAKE_FACTORY,\r\n  APE_FACTORY,\r\n  BNB_BUSD_PANCAKE_POOL,\r\n} from '../config/web3Config';\r\nimport tokenHelper from '../helper/tokenHelper';\r\nimport {\r\n  bscProvider,\r\n  bep20ProxyContract,\r\n  getBep20Contract,\r\n} from './web3Service';\r\nimport { dispatch, getState } from '../store/config/store';\r\nimport quoteTokenAction from '../store/quoteTokenActionCreater';\r\nimport tokenAction from '../store/tokenActionCreater';\r\nimport { DApp, IPool, ITokenDetail } from '../model/tokenModel';\r\n\r\ntype TTokenReserve = { [key: string]: [BigNumber, BigNumber] };\r\n\r\nexport async function updateTokenPrice() {\r\n  const tokens: ITokenDetail[] = getState().tokens;\r\n  const newTokens: ITokenDetail[] = await getTokenPrice(tokens);\r\n\r\n  dispatch(tokenAction.updateTokenPrice(newTokens));\r\n}\r\n\r\nexport async function getTokenPrice(\r\n  tokens: ITokenDetail[],\r\n  dApp?: DApp\r\n): Promise<ITokenDetail[]> {\r\n  if (_.size(tokens) === 0) {\r\n    return tokens;\r\n  }\r\n\r\n  let newTokens: ITokenDetail[];\r\n  let pancakeAdressPairs: [string, string][] = [];\r\n  let apeAdressPairs: [string, string][] = [];\r\n\r\n  tokens.forEach((token: ITokenDetail) => {\r\n    switch (dApp || token.targetPool?.dApp) {\r\n      case DApp.PANCAKE:\r\n        pancakeAdressPairs.push([\r\n          token.targetPool?.quoteAddress as string,\r\n          token.address,\r\n        ]);\r\n        break;\r\n\r\n      case DApp.APE:\r\n        apeAdressPairs.push([\r\n          token.targetPool?.quoteAddress as string,\r\n          token.address,\r\n        ]);\r\n        break;\r\n    }\r\n  });\r\n\r\n  let poolReserve: [[BigNumber, BigNumber][], [BigNumber, BigNumber][]] = [\r\n    [],\r\n    [],\r\n  ];\r\n  let isRequestError = false;\r\n\r\n  try {\r\n    poolReserve = await updateChunkTokenPrice(\r\n      pancakeAdressPairs,\r\n      apeAdressPairs,\r\n      dApp\r\n    );\r\n  } catch (error) {\r\n    isRequestError = true;\r\n    toastUpdateTokenPriceError();\r\n    console.log(error);\r\n  }\r\n\r\n  if (isRequestError) {\r\n    return tokens;\r\n  }\r\n\r\n  const bnbReservePrice = tokenHelper.computedTokenReservePricePerQuote(\r\n    _.last(poolReserve[0]) as [BigNumber, BigNumber]\r\n  );\r\n  dispatch(quoteTokenAction.updateBnb({ bnb: { price: bnbReservePrice } }));\r\n\r\n  const tokenReserve: TTokenReserve = mappingTokeReserve(\r\n    [...pancakeAdressPairs, ...apeAdressPairs],\r\n    [...poolReserve[0].slice(0, poolReserve[0].length - 1), ...poolReserve[1]]\r\n  );\r\n\r\n  newTokens = tokens.map((token: ITokenDetail): ITokenDetail => {\r\n    const reserve = tokenReserve[token.address];\r\n    const newReserve: [string, string] = [\r\n      utils.formatEther(reserve[0]),\r\n      utils.formatUnits(reserve[1], token.decimals),\r\n    ];\r\n    let liquidity: number = token.targetPool?.liquidity as number;\r\n    let reservePrice: number = token.price as number;\r\n\r\n    switch (token.targetPool?.quoteAddress) {\r\n      case BUSD_BEP20.address:\r\n      case USDT_BEP20.address:\r\n      case USDC_BEP20.address:\r\n        liquidity = tokenHelper.computedLiquidity(reserve);\r\n        reservePrice = tokenHelper.computedTokenReservePricePerQuote(\r\n          reserve,\r\n          token.decimals\r\n        );\r\n\r\n        break;\r\n\r\n      case BNB_BEP20.address:\r\n        liquidity = tokenHelper.computedLiquidity(reserve) * bnbReservePrice;\r\n        reservePrice =\r\n          tokenHelper.computedTokenReservePricePerQuote(\r\n            reserve,\r\n            token.decimals\r\n          ) * bnbReservePrice;\r\n\r\n        break;\r\n    }\r\n\r\n    return {\r\n      ...token,\r\n      price: reservePrice,\r\n      targetPool: {\r\n        ...(token.targetPool as IPool),\r\n        liquidity,\r\n        reservePrice,\r\n        reserve: newReserve,\r\n      },\r\n    };\r\n  });\r\n\r\n  return newTokens;\r\n}\r\n\r\nasync function updateChunkTokenPrice(\r\n  pancakeAdressPairs: [string, string][],\r\n  apeAdressPairs: [string, string][],\r\n  dApp?: DApp\r\n): Promise<[[BigNumber, BigNumber][], [BigNumber, BigNumber][]]> {\r\n  const isQuotePancake = !dApp || dApp === DApp.PANCAKE;\r\n  const chunkPancakeAddress: [string, string][][] = _.chunk(\r\n    isQuotePancake\r\n      ? [...pancakeAdressPairs, [BUSD_BEP20.address, BNB_BEP20.address]]\r\n      : pancakeAdressPairs,\r\n    CHUNK_DATA_NUMBER\r\n  );\r\n  const chunkApeAddress: [string, string][][] = _.chunk(\r\n    !isQuotePancake\r\n      ? [...apeAdressPairs, [BUSD_BEP20.address, BNB_BEP20.address]]\r\n      : apeAdressPairs,\r\n    CHUNK_DATA_NUMBER\r\n  );\r\n  let chunkPoolReservePancakePromises: Promise<any>[] = [];\r\n  let chunkPoolReserveApePromises: Promise<any>[] = [];\r\n\r\n  _.each(chunkPancakeAddress, (address: [string, string][]) => {\r\n    chunkPoolReservePancakePromises.push(\r\n      bep20ProxyContract.getReversesMulti(PANCAKE_FACTORY, address)\r\n    );\r\n  });\r\n  _.each(chunkApeAddress, (address: [string, string][]) => {\r\n    chunkPoolReserveApePromises.push(\r\n      bep20ProxyContract.getReversesMulti(APE_FACTORY, address)\r\n    );\r\n  });\r\n\r\n  const chunkDatas = await Promise.all([\r\n    ...chunkPoolReservePancakePromises,\r\n    ...chunkPoolReserveApePromises,\r\n  ]);\r\n  const poolReserve: [[BigNumber, BigNumber][], [BigNumber, BigNumber][]] =\r\n    isQuotePancake\r\n      ? [\r\n          _.flatten(\r\n            _.slice(chunkDatas, 0, _.size(chunkPoolReservePancakePromises)) as [\r\n              BigNumber,\r\n              BigNumber\r\n            ][][]\r\n          ),\r\n          _.flatten(\r\n            _.slice(\r\n              chunkDatas,\r\n              _.size(chunkPoolReservePancakePromises),\r\n              _.size(chunkDatas)\r\n            ) as [BigNumber, BigNumber][][]\r\n          ),\r\n        ]\r\n      : [\r\n          [\r\n            ..._.flatten(\r\n              _.slice(\r\n                chunkDatas,\r\n                0,\r\n                _.size(chunkPoolReservePancakePromises)\r\n              ) as [BigNumber, BigNumber][][]\r\n            ),\r\n            _.last(_.last(chunkDatas)) as [BigNumber, BigNumber],\r\n          ],\r\n          _.slice(\r\n            _.flatten(\r\n              _.slice(\r\n                chunkDatas,\r\n                _.size(chunkPoolReservePancakePromises),\r\n                _.size(chunkDatas)\r\n              ) as [BigNumber, BigNumber][][]\r\n            ),\r\n            0,\r\n            _.size(apeAdressPairs)\r\n          ),\r\n        ];\r\n\r\n  return poolReserve;\r\n}\r\n\r\nfunction mappingTokeReserve(\r\n  addressPairs: [string, string][],\r\n  reserve: [BigNumber, BigNumber][]\r\n): TTokenReserve {\r\n  const tokenReserve: TTokenReserve = {};\r\n\r\n  addressPairs.forEach((address: [string, string], index: number) => {\r\n    tokenReserve[address[1]] = reserve[index];\r\n  });\r\n\r\n  return tokenReserve;\r\n}\r\n\r\nlet timer = 0;\r\nfunction toastUpdateTokenPriceError() {\r\n  if (timer === 0) {\r\n    toast.error('Update token price failure!', {\r\n      autoClose: 1000,\r\n      hideProgressBar: true,\r\n    });\r\n    timer = +new Date();\r\n  } else if (+new Date() >= timer + 3 * 1000) {\r\n    timer = 0;\r\n  }\r\n}\r\n\r\n// Legacy code\r\ntype TSwapAmount = {\r\n  amount0In: BigNumber;\r\n  amount0Out: BigNumber;\r\n  amount1In: BigNumber;\r\n  amount1Out: BigNumber;\r\n};\r\n\r\nexport async function updateTokenOldPrice() {\r\n  const OLD_BLOCK = 400;\r\n  const RANGE_BLOCK = 60;\r\n  const tokens: ITokenDetail[] = getState().tokens;\r\n  const bnbToken: ITokenDetail = {\r\n    ...BNB_BEP20,\r\n    targetPool: {\r\n      address: BNB_BUSD_PANCAKE_POOL,\r\n      quoteSymbol: BUSD_BEP20.symbol as string,\r\n      quoteAddress: BUSD_BEP20.address,\r\n    },\r\n  };\r\n  const lastBlock: number = await bscProvider.getBlockNumber();\r\n  let oldSwapPromises: Promise<ITokenDetail | null>[] = [];\r\n\r\n  [...tokens, bnbToken].forEach((token: ITokenDetail) => {\r\n    const poolContract: Contract = getBep20Contract(\r\n      token.targetPool?.address as string\r\n    );\r\n    const filter: EventFilter = poolContract.filters.Swap();\r\n    const oldSwapPromise = poolContract\r\n      .queryFilter(\r\n        filter,\r\n        lastBlock - OLD_BLOCK - RANGE_BLOCK,\r\n        lastBlock - OLD_BLOCK\r\n      )\r\n      .then((results: Event[]): ITokenDetail | null => {\r\n        if (results.length === 0) {\r\n          return null;\r\n        }\r\n\r\n        const swapAmount: TSwapAmount = {\r\n          amount0In: _.last(results)?.args?.['amount0In'],\r\n          amount0Out: _.last(results)?.args?.['amount0Out'],\r\n          amount1In: _.last(results)?.args?.['amount1In'],\r\n          amount1Out: _.last(results)?.args?.['amount1Out'],\r\n        };\r\n\r\n        return {\r\n          ...token,\r\n          oldPrice: Math.abs(\r\n            computedTokenSwapPricePerQuote(\r\n              token.targetPool?.quoteAddress as string,\r\n              token.address,\r\n              token.decimals as number,\r\n              swapAmount\r\n            )\r\n          ),\r\n        };\r\n      });\r\n\r\n    oldSwapPromises.push(oldSwapPromise);\r\n  });\r\n\r\n  let oldSwapTokens: ITokenDetail[] = _.compact(\r\n    await Promise.all(oldSwapPromises)\r\n  );\r\n\r\n  oldSwapTokens = convertOldPriceToUsd(oldSwapTokens);\r\n\r\n  dispatch(tokenAction.updateTokenOldPrice(oldSwapTokens));\r\n}\r\n\r\nfunction computedTokenSwapPricePerQuote(\r\n  quoteTokenAddress: string,\r\n  tokenAddress: string,\r\n  tokenDecimals: number,\r\n  swapAmount: TSwapAmount\r\n): number {\r\n  const quoteTokenBigNumber = BigNumber.from(quoteTokenAddress);\r\n  const tokenBigNumber = BigNumber.from(tokenAddress);\r\n\r\n  let swapPrice: number;\r\n\r\n  if (quoteTokenBigNumber.lt(tokenBigNumber)) {\r\n    const amount0In = Number(utils.formatEther(swapAmount.amount0In));\r\n    const amount0Out = Number(utils.formatEther(swapAmount.amount0Out));\r\n    const amount1In = Number(\r\n      utils.formatUnits(swapAmount.amount1In, tokenDecimals)\r\n    );\r\n    const amount1Out = Number(\r\n      utils.formatUnits(swapAmount.amount1Out, tokenDecimals)\r\n    );\r\n\r\n    if (amount0In) {\r\n      swapPrice = amount0In / amount1Out;\r\n    } else {\r\n      swapPrice = -amount0Out / amount1In;\r\n    }\r\n  } else {\r\n    const amount0In = Number(\r\n      utils.formatUnits(swapAmount.amount0In, tokenDecimals)\r\n    );\r\n    const amount0Out = Number(\r\n      utils.formatUnits(swapAmount.amount0Out, tokenDecimals)\r\n    );\r\n    const amount1In = Number(utils.formatEther(swapAmount.amount1In));\r\n    const amount1Out = Number(utils.formatEther(swapAmount.amount1Out));\r\n\r\n    if (amount0In) {\r\n      swapPrice = -amount1Out / amount0In;\r\n    } else {\r\n      swapPrice = amount1In / amount0Out;\r\n    }\r\n  }\r\n\r\n  return swapPrice;\r\n}\r\n\r\nfunction convertOldPriceToUsd(oldSwapTokens: ITokenDetail[]): ITokenDetail[] {\r\n  const oldPriceBnb: number = _.last(oldSwapTokens)?.oldPrice as number;\r\n\r\n  return oldSwapTokens.map((token: ITokenDetail): ITokenDetail => {\r\n    if (BNB_BEP20.address === token.targetPool?.quoteAddress) {\r\n      return {\r\n        ...token,\r\n        oldPrice: (token.oldPrice as number) * (oldPriceBnb as number),\r\n      };\r\n    }\r\n\r\n    return token;\r\n  });\r\n}\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"btnIcon\":\"InputText_btnIcon__UtEa8\",\"btnIconIOS\":\"InputText_btnIconIOS__3oelS\"};"],"sourceRoot":""}