{"version":3,"sources":["helper/tokenHelper.ts","config/tokenBep20Config.ts","model/tokenModel.ts","service/web3Service.ts","asset/logo/bep20.png","helper/browserHelper.ts","view/controls/InputText/InputText.tsx","service/loadingService.ts","service/tokenInfoService.ts","config/abiBep20Config.ts","service/tokenPoolService.ts","service/tokenPriceService.ts","view/controls/InputText/InputText.module.scss"],"names":["helper","computedLiquidity","reserve","reserveQuote","Number","utils","formatEther","computedTokenReservePricePerQuote","tokenDecimals","reserveToken","formatUnits","reservePrice","convertToInternationalCurrencySystem","currency","abs","Math","_","round","toString","convertBalanceToInternationalCurrencySystem","roundCurrency","roundedCurrency","decimal","max","floor","length","buildBurnPercent","burn","isNil","getShortAddress","adress","start","end","toLowerCase","shortAddress","slice","BUSD_BEP20","name","symbol","address","decimals","logoURI","USDT_BEP20","USDC_BEP20","BNB_BEP20","DApp","bscProvider","providers","JsonRpcProvider","BSC_NODE","bep20Proxy","Contract","PANCAKE_FACTORY","ABI_BEP20_FACTORY","APE_FACTORY","BEP20_PROXY","ABI_BEP20_PROXY","getTokenBep20Contract","tokenAddress","ABI_BEP20_TOKEN","iOS","includes","navigator","platform","userAgent","document","InputText","props","state","onChange","bind","onClear","e","this","target","value","inputMode","type","className","isShowClear","placeholder","style","btnIcon","browserHelper","btnIconIOS","onClick","PureComponent","defaultProps","loadingService","showLoading","getState","loading","isLoading","dispatch","loadingCreater","hideLoading","getTokenInfos","a","tokens","map","token","infos","isRequestError","getChunkTokenInfos","toast","error","autoClose","console","log","index","tokenAction","getTokenInfo","chunkAddress","chunk","CHUNK_DATA_NUMBER","chunkSymbolPromises","chunkDecimalPromises","each","push","getSymbols","getDecimals","Promise","all","chunkDatas","flatten","size","ABI_BEP20_PAIR","inputs","internalType","outputs","stateMutability","constant","payable","getPools","getTokenPool","newTokens","getPool","busdAdressPairs","usdtAdressPairs","usdcAdressPairs","bnbAdressPairs","forEach","adressPairs","poolAddressReserve","getChunkPools","bnbReservePrice","tokenHelper","last","categorizePool","mappingCategorizePool","pancakePoolAddress","mappingPoolAddressReserve","PANCAKE","pancake","apePoolAddress","APE","ape","targetPool","maxBy","price","pools","chunkPoolAddressPancakePromises","chunkPoolAddressApePromises","chunkPoolReservePancakePromises","chunkPoolReserveApePromises","getPoolAddress","getReversesMulti","chunkLength","chunkNumber","chunkAddressPancake","chunkAddressApe","chunkReservePancake","chunkReserveApe","busd","usdt","usdc","bnb","dApp","categorizeAddressReserve","tokenIndex","quoteSymbol","quoteAddress","liquidity","filter","pool","INVALID_ADDRESS","updateTokenPrice","getTokenPrice","pancakeAdressPairs","apeAdressPairs","poolReserve","updateChunkTokenPrice","toastUpdateTokenPriceError","tokenReserve","mappingTokeReserve","isQuotePancake","chunkPancakeAddress","chunkApeAddress","addressPairs","timer","hideProgressBar","module","exports"],"mappings":"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","file":"static/js/0.d5440e8e.chunk.js","sourcesContent":["import _ from 'lodash';\nimport { utils, BigNumber } from 'ethers';\n\nfunction computedLiquidity(reserve: [BigNumber, BigNumber]): number {\n  const reserveQuote = Number(utils.formatEther(reserve[0]));\n\n  if (!reserveQuote) return 0;\n\n  return reserveQuote;\n}\n\nfunction computedTokenReservePricePerQuote(\n  reserve: [BigNumber, BigNumber],\n  tokenDecimals: number = 18\n): number {\n  const reserveQuote = Number(utils.formatEther(reserve[0]));\n  const reserveToken = Number(utils.formatUnits(reserve[1], tokenDecimals));\n\n  if (!reserveQuote || !reserveToken) return 0;\n\n  const reservePrice: number = reserveQuote / reserveToken;\n\n  return reservePrice;\n}\n\nfunction convertToInternationalCurrencySystem(currency: number): string {\n  const abs: number = Math.abs(Number(currency));\n  const currencySystem: string =\n    // Nine Zeroes for Billions\n    abs >= 1.0e9\n      ? _.round(abs / 1.0e9, 3) + 'B'\n      : // Six Zeroes for Millions\n      abs >= 1.0e6\n      ? _.round(abs / 1.0e6, 2) + 'M'\n      : // Three Zeroes for Thousands\n      abs >= 1.0e3\n      ? _.round(abs / 1.0e3, 1) + 'K'\n      : _.round(abs).toString();\n\n  return currencySystem;\n}\n\nfunction convertBalanceToInternationalCurrencySystem(currency: number): string {\n  const abs: number = Math.abs(Number(currency));\n  const currencySystem: string =\n    // Nine Zeroes for Billions\n    abs >= 1.0e9\n      ? _.round(abs / 1.0e9, 2) + 'B'\n      : // Six Zeroes for Millions\n      abs >= 1.0e6\n      ? _.round(abs / 1.0e6, 2) + 'M'\n      : // Five Zeroes for Thousands\n      abs >= 1.0e5\n      ? _.round(abs / 1.0e3) + 'K'\n      : abs >= 1.0e3\n      ? _.round(abs, 2).toString()\n      : abs >= 1.0e1\n      ? _.round(abs, 3).toString()\n      : _.round(abs, 6).toString();\n\n  return currencySystem;\n}\n\nfunction roundCurrency(currency: number): string {\n  const abs: number = Math.abs(Number(currency));\n  let roundedCurrency;\n\n  if (abs >= 1) {\n    const decimal: number = Math.max(5 - Math.floor(abs).toString().length, 2);\n\n    roundedCurrency = _.round(abs, decimal);\n  } else {\n    const decimal: number = Math.floor(1 / (abs % 1)).toString().length + 4;\n\n    roundedCurrency = _.round(abs, decimal);\n  }\n\n  return roundedCurrency.toString();\n}\n\nfunction buildBurnPercent(burn?: number): string {\n  if (_.isNil(burn)) {\n    return '';\n  }\n\n  if (burn === -1) {\n    return '?';\n  }\n\n  return burn + '%';\n}\n\nfunction getShortAddress(\n  adress: string = '',\n  start: number = 2,\n  end: number = 3\n): string {\n  if (adress.length <= start + end + 2) {\n    return adress.toLowerCase();\n  }\n\n  const shortAddress =\n    adress.slice(0, start) +\n    '..' +\n    adress.slice(adress.length - end, adress.length);\n\n  return shortAddress.toLowerCase();\n}\n\nconst helper = {\n  computedLiquidity,\n  computedTokenReservePricePerQuote,\n  convertToInternationalCurrencySystem,\n  convertBalanceToInternationalCurrencySystem,\n  roundCurrency,\n  buildBurnPercent,\n  getShortAddress,\n};\n\nexport default helper;\n","import { ITokenBase } from '../model/tokenModel';\n\nexport const BUSD_BEP20: ITokenBase = {\n  name: 'Binance USD',\n  symbol: 'BUSD',\n  address: '0xe9e7cea3dedca5984780bafc599bd69add087d56',\n  decimals: 18,\n  logoURI: 'https://s2.coinmarketcap.com/static/img/coins/64x64/4687.png',\n};\n\nexport const USDT_BEP20: ITokenBase = {\n  name: 'Tether',\n  symbol: 'USDT',\n  address: '0x55d398326f99059ff775485246999027b3197955',\n  decimals: 18,\n  logoURI: 'https://s2.coinmarketcap.com/static/img/coins/64x64/825.png',\n};\n\nexport const USDC_BEP20: ITokenBase = {\n  name: 'USD Coin',\n  symbol: 'USDC',\n  address: '0x8ac76a51cc950d9822d68b83fe1ad97b32cd580d',\n  decimals: 18,\n  logoURI: 'https://s2.coinmarketcap.com/static/img/coins/64x64/3408.png',\n};\n\nexport const BNB_BEP20: ITokenBase = {\n  name: 'Binance Coin',\n  symbol: 'BNB',\n  address: '0xbb4cdb9cbd36b01bd1cbaebf2de08d9173bc095c',\n  decimals: 18,\n  logoURI: 'https://s2.coinmarketcap.com/static/img/coins/64x64/1839.png',\n};\n","export enum DApp {\n  PANCAKE = 'PANCAKE',\n  APE = 'APE',\n}\n\nexport interface ITokenBase {\n  name: string;\n  symbol?: string;\n  address: string;\n  decimals?: number;\n  logoURI?: string;\n  burn?: number;\n  web?: string;\n}\n\nexport interface TimelinePrice {\n  price: number;\n  liquidity?: number;\n  timestamp: number;\n}\n\nexport interface CachePrice {\n  price: number;\n  liquidity?: number;\n  timelinePrices: TimelinePrice[];\n}\n\nexport interface IPool {\n  dApp?: DApp;\n  address: string;\n  quoteSymbol: string;\n  quoteAddress: string;\n  liquidity?: number;\n  reservePrice?: number;\n  reserve?: [string, string];\n}\n\nexport interface IVariationNotification {\n  cacheVariation?: number;\n  isPush: boolean;\n  hasOncePush: boolean;\n  timestamp: number;\n}\n\nexport interface ITokenDetail extends ITokenBase, ITokenPrice {\n  targetPool?: IPool;\n  pools?: IPool[];\n  variationNotification?: IVariationNotification;\n  variationNotificationFomo?: IVariationNotification;\n}\n\nexport interface ITokenTable {\n  coinTitle: string;\n  pool: string;\n  price: string;\n  variation: number;\n  division: number;\n  address: string;\n  logoURI?: string;\n  web?: string;\n}\n\ninterface ITokenPrice {\n  price?: number;\n  oldPrice?: number;\n  variationPrice?: number;\n  divisionPrice?: number;\n  variationLiquidity?: number;\n  cachePrice?: CachePrice;\n}\n","import { providers, Contract } from 'ethers';\nimport {\n  ABI_BEP20_FACTORY,\n  ABI_BEP20_PROXY,\n  ABI_BEP20_TOKEN,\n} from '../config/abiBep20Config';\nimport {\n  BSC_NODE,\n  PANCAKE_FACTORY,\n  APE_FACTORY,\n  BEP20_PROXY,\n} from '../config/web3Config';\n\nexport const bscProvider = new providers.JsonRpcProvider(BSC_NODE);\n\nexport const pancakeFactory: Contract = new Contract(\n  PANCAKE_FACTORY,\n  ABI_BEP20_FACTORY,\n  bscProvider\n);\n\nexport const apeFactory: Contract = new Contract(\n  APE_FACTORY,\n  ABI_BEP20_FACTORY,\n  bscProvider\n);\n\nexport const bep20Proxy: Contract = new Contract(\n  BEP20_PROXY,\n  ABI_BEP20_PROXY,\n  bscProvider\n);\n\nexport function getTokenBep20Contract(tokenAddress: string): Contract {\n  return new Contract(tokenAddress, ABI_BEP20_TOKEN, bscProvider);\n}\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACkAAAApCAIAAAAnApehAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAFGmlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNi4wLWMwMDIgNzkuMTY0NDYwLCAyMDIwLzA1LzEyLTE2OjA0OjE3ICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgMjEuMiAoTWFjaW50b3NoKSIgeG1wOkNyZWF0ZURhdGU9IjIwMjEtMTItMDFUMjI6NTc6NTYrMDc6MDAiIHhtcDpNb2RpZnlEYXRlPSIyMDIxLTEyLTAxVDIyOjU5OjM4KzA3OjAwIiB4bXA6TWV0YWRhdGFEYXRlPSIyMDIxLTEyLTAxVDIyOjU5OjM4KzA3OjAwIiBkYzpmb3JtYXQ9ImltYWdlL3BuZyIgcGhvdG9zaG9wOkNvbG9yTW9kZT0iMyIgcGhvdG9zaG9wOklDQ1Byb2ZpbGU9InNSR0IgSUVDNjE5NjYtMi4xIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjczNGJiNTE4LWRiNTYt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\"","function iOS(): boolean {\n  return (\n    [\n      'iPad Simulator',\n      'iPhone Simulator',\n      'iPod Simulator',\n      'iPad',\n      'iPhone',\n      'iPod',\n    ].includes(navigator.platform) ||\n    // iPad on iOS 13 detection\n    (navigator.userAgent.includes('Mac') && 'ontouchend' in document)\n  );\n}\n\nconst helper = {\n  iOS,\n};\n\nexport default helper;\n","import { PureComponent, ReactElement, ChangeEvent } from 'react';\nimport browserHelper from '../../../helper/browserHelper';\nimport style from './InputText.module.scss';\n\ninterface IStoreProps {}\ninterface IHOCProps {}\ninterface IOwnProps {\n  inputMode:\n    | 'text'\n    | 'search'\n    | 'none'\n    | 'tel'\n    | 'url'\n    | 'email'\n    | 'numeric'\n    | 'decimal';\n  type: 'text' | 'password';\n  className: string;\n  isShowClear: boolean;\n  placeholder: string;\n  value: string;\n  onChange: (v: string) => void;\n}\ninterface IOwnState {}\n\nclass InputText extends PureComponent<\n  IStoreProps & IHOCProps & IOwnProps,\n  IOwnState\n> {\n  static defaultProps = {\n    inputMode: 'text',\n    type: 'text',\n    className: '',\n    isShowClear: false,\n    placeholder: '',\n    value: '',\n    onChange: () => {},\n  };\n\n  state: IOwnState;\n\n  constructor(props: IOwnProps & IHOCProps & IStoreProps) {\n    super(props);\n\n    this.state = {};\n\n    this.onChange = this.onChange.bind(this);\n    this.onClear = this.onClear.bind(this);\n  }\n\n  onChange(e: ChangeEvent<HTMLInputElement>) {\n    this.props.onChange(e.target.value);\n  }\n\n  onClear() {\n    this.props.onChange('');\n  }\n\n  render(): ReactElement {\n    const { inputMode, type, className, isShowClear, placeholder, value } =\n      this.props;\n\n    return (\n      <div className='position-relative'>\n        <input\n          inputMode={inputMode}\n          type={type}\n          className={'fk-input' + (className ? ` ${className}` : '')}\n          placeholder={placeholder}\n          value={value}\n          onChange={this.onChange}\n        />\n        {isShowClear && !!value && (\n          <button\n            className={\n              'fk-button-icon ' +\n              style.btnIcon +\n              (browserHelper.iOS() ? ` ${style.btnIconIOS}` : '')\n            }\n            onClick={this.onClear}\n          >\n            <i className='bi bi-x-lg'></i>\n          </button>\n        )}\n      </div>\n    );\n  }\n}\n\nexport default InputText;\n","import { dispatch, getState } from '../store/config/store';\nimport loadingCreater from '../store/loadingActionCreater';\n\nexport const showLoading = () => {\n  if (getState().loading?.isLoading) {\n    return;\n  }\n\n  dispatch(loadingCreater.showLoading());\n};\n\nexport const hideLoading = () => {\n  if (!getState().loading?.isLoading) {\n    return;\n  }\n\n  dispatch(loadingCreater.hideLoading());\n};\n\nconst loadingService = { showLoading, hideLoading };\n\nexport default loadingService;\n","import _ from 'lodash';\nimport { toast } from 'react-toastify';\nimport { CHUNK_DATA_NUMBER } from '../config/appConfig';\nimport { bep20Proxy } from './web3Service';\nimport { getState, dispatch } from '../store/config/store';\nimport tokenAction from '../store/tokenActionCreater';\nimport { ITokenDetail } from '../model/tokenModel';\n\nexport async function getTokenInfos() {\n  let tokens: ITokenDetail[] = getState().tokens;\n  const tokenAddress: string[] = tokens.map(\n    (token: ITokenDetail) => token.address\n  );\n\n  let infos: [string[], number[]] = [[], []];\n  let isRequestError = false;\n\n  try {\n    infos = await getChunkTokenInfos(tokenAddress);\n  } catch (error) {\n    isRequestError = true;\n    toast.error('Get token info failure!', { autoClose: 500 });\n    console.log(error);\n  }\n\n  if (isRequestError) {\n    return;\n  }\n\n  tokens = tokens.map(\n    (token: ITokenDetail, index: number): ITokenDetail => ({\n      ...token,\n      symbol: infos[0][index],\n      decimals: infos[1][index],\n    })\n  );\n\n  dispatch(tokenAction.getTokenInfo(tokens));\n}\n\nasync function getChunkTokenInfos(\n  tokenAddress: string[]\n): Promise<[string[], number[]]> {\n  const chunkAddress: string[][] = _.chunk(tokenAddress, CHUNK_DATA_NUMBER);\n  let chunkSymbolPromises: Promise<any>[] = [];\n  let chunkDecimalPromises: Promise<any>[] = [];\n\n  _.each(chunkAddress, (address: string[]) => {\n    chunkSymbolPromises.push(bep20Proxy.getSymbols(address));\n    chunkDecimalPromises.push(bep20Proxy.getDecimals(address));\n  });\n\n  const chunkDatas = await Promise.all([\n    ...chunkSymbolPromises,\n    ...chunkDecimalPromises,\n  ]);\n  const infos: [string[], number[]] = [\n    _.flatten(_.slice(chunkDatas, 0, _.size(chunkDatas) / 2) as string[][]),\n    _.flatten(_.slice(chunkDatas, _.size(chunkDatas) / 2) as number[][]),\n  ];\n\n  return infos;\n}\n","export const ABI_BEP20_FACTORY = [\n  'function getPair(address tokenA, address tokenB) external view returns (address pair)',\n];\n\nexport const ABI_BEP20_PAIR = [\n  'function token0() external view returns (address)',\n  'function token1() external view returns (address)',\n  'function getReserves() external view returns (uint112 reserve0, uint112 reserve1, uint32 blockTimestampLast)',\n  'event Swap(address indexed sender, uint amount0In, uint amount1In, uint amount0Out, uint amount1Out, address indexed to)',\n];\n\nexport const ABI_BEP20_PROXY = [\n  {\n    inputs: [\n      {\n        internalType: 'address[]',\n        name: 'tokens',\n        type: 'address[]',\n      },\n    ],\n    name: 'getSymbols',\n    outputs: [\n      {\n        internalType: 'string[]',\n        name: 'symbols',\n        type: 'string[]',\n      },\n    ],\n    stateMutability: 'view',\n    type: 'function',\n    constant: true,\n  },\n  {\n    inputs: [\n      {\n        internalType: 'address[]',\n        name: 'tokens',\n        type: 'address[]',\n      },\n    ],\n    name: 'getDecimals',\n    outputs: [\n      {\n        internalType: 'uint8[]',\n        name: 'decimals',\n        type: 'uint8[]',\n      },\n    ],\n    stateMutability: 'view',\n    type: 'function',\n    constant: true,\n  },\n  {\n    inputs: [\n      {\n        internalType: 'address',\n        name: 'factory',\n        type: 'address',\n      },\n      {\n        internalType: 'address[2][]',\n        name: 'pairs',\n        type: 'address[2][]',\n      },\n    ],\n    name: 'getPoolAddress',\n    outputs: [\n      {\n        internalType: 'address[]',\n        name: 'poolAddress',\n        type: 'address[]',\n      },\n    ],\n    stateMutability: 'view',\n    type: 'function',\n    constant: true,\n  },\n  {\n    inputs: [\n      {\n        internalType: 'address',\n        name: 'factory',\n        type: 'address',\n      },\n      {\n        internalType: 'address[2][]',\n        name: 'pairs',\n        type: 'address[2][]',\n      },\n    ],\n    name: 'getReversesMulti',\n    outputs: [\n      {\n        internalType: 'uint112[2][]',\n        name: 'reserves',\n        type: 'uint112[2][]',\n      },\n    ],\n    stateMutability: 'view',\n    type: 'function',\n    constant: true,\n  },\n];\n\nexport const ABI_BEP20_TOKEN = [\n  {\n    constant: true,\n    inputs: [{ internalType: 'address', name: 'account', type: 'address' }],\n    name: 'balanceOf',\n    outputs: [{ internalType: 'uint256', name: '', type: 'uint256' }],\n    payable: false,\n    stateMutability: 'view',\n    type: 'function',\n  },\n];\n","import _ from 'lodash';\nimport { utils, BigNumber } from 'ethers';\nimport { toast } from 'react-toastify';\nimport { CHUNK_DATA_NUMBER } from '../config/appConfig';\nimport {\n  BUSD_BEP20,\n  USDT_BEP20,\n  USDC_BEP20,\n  BNB_BEP20,\n} from '../config/tokenBep20Config';\nimport {\n  PANCAKE_FACTORY,\n  APE_FACTORY,\n  INVALID_ADDRESS,\n} from '../config/web3Config';\nimport tokenHelper from '../helper/tokenHelper';\nimport { bep20Proxy } from './web3Service';\nimport { dispatch, getState } from '../store/config/store';\nimport tokenAction from '../store/tokenActionCreater';\nimport { DApp, IPool, ITokenDetail } from '../model/tokenModel';\n\ntype TPoolAddressReserve = [\n  string[],\n  string[],\n  [BigNumber, BigNumber][],\n  [BigNumber, BigNumber][]\n];\n\ntype AddressReserve = {\n  address: string[];\n  reserve: [BigNumber, BigNumber][];\n};\n\ntype TCategorizeAddressReserve = {\n  busd: AddressReserve;\n  usdt: AddressReserve;\n  usdc: AddressReserve;\n  bnb: AddressReserve;\n};\n\ntype TCategorizePool = {\n  pancake: TCategorizeAddressReserve;\n  ape: TCategorizeAddressReserve;\n};\n\nexport async function getPools() {\n  const tokens: ITokenDetail[] = getState().tokens;\n  const newTokens: ITokenDetail[] = await getTokenPool(tokens);\n\n  dispatch(tokenAction.getPool(newTokens));\n}\n\nexport async function getTokenPool(\n  tokens: ITokenDetail[]\n): Promise<ITokenDetail[]> {\n  if (_.size(tokens) === 0) {\n    return tokens;\n  }\n\n  let newTokens: ITokenDetail[];\n  let busdAdressPairs: [string, string][] = [];\n  let usdtAdressPairs: [string, string][] = [];\n  let usdcAdressPairs: [string, string][] = [];\n  let bnbAdressPairs: [string, string][] = [];\n  let adressPairs: [string, string][] = [];\n\n  tokens.forEach((token: ITokenDetail) => {\n    busdAdressPairs.push([BUSD_BEP20.address, token.address]);\n    usdtAdressPairs.push([USDT_BEP20.address, token.address]);\n    usdcAdressPairs.push([USDC_BEP20.address, token.address]);\n    bnbAdressPairs.push([BNB_BEP20.address, token.address]);\n  });\n\n  adressPairs = [\n    ...busdAdressPairs,\n    ...usdtAdressPairs,\n    ...usdcAdressPairs,\n    ...bnbAdressPairs,\n  ];\n\n  let poolAddressReserve: TPoolAddressReserve = [[], [], [], []];\n  let isRequestError = false;\n\n  try {\n    poolAddressReserve = await getChunkPools(adressPairs);\n  } catch (error) {\n    isRequestError = true;\n    toast.error('Get token pool failure!');\n    console.log(error);\n  }\n\n  if (isRequestError) {\n    return await getTokenPool(tokens);\n  }\n\n  const bnbReservePrice = tokenHelper.computedTokenReservePricePerQuote(\n    _.last(poolAddressReserve[2]) as [BigNumber, BigNumber]\n  );\n\n  const categorizePool: TCategorizePool = mappingCategorizePool(\n    poolAddressReserve,\n    tokens.length\n  );\n\n  newTokens = tokens.map((token: ITokenDetail, index: number): ITokenDetail => {\n    const pancakePoolAddress: IPool[] = mappingPoolAddressReserve(\n      DApp.PANCAKE,\n      categorizePool.pancake,\n      index,\n      token.decimals as number,\n      bnbReservePrice\n    );\n    const apePoolAddress: IPool[] = mappingPoolAddressReserve(\n      DApp.APE,\n      categorizePool.ape,\n      index,\n      token.decimals as number,\n      bnbReservePrice\n    );\n    const targetPool: IPool = _.maxBy(\n      [...pancakePoolAddress, ...apePoolAddress],\n      'liquidity'\n    ) as IPool;\n\n    return {\n      ...token,\n      price: targetPool.reservePrice,\n      targetPool,\n      pools: [...pancakePoolAddress, ...apePoolAddress],\n    };\n  });\n\n  return newTokens;\n}\n\nasync function getChunkPools(\n  adressPairs: [string, string][]\n): Promise<TPoolAddressReserve> {\n  const chunkAddress: [string, string][][] = _.chunk(\n    adressPairs,\n    CHUNK_DATA_NUMBER\n  );\n  let chunkPoolAddressPancakePromises: Promise<any>[] = [];\n  let chunkPoolAddressApePromises: Promise<any>[] = [];\n  let chunkPoolReservePancakePromises: Promise<any>[] = [];\n  let chunkPoolReserveApePromises: Promise<any>[] = [];\n\n  _.each(chunkAddress, (address: [string, string][]) => {\n    chunkPoolAddressPancakePromises.push(\n      bep20Proxy.getPoolAddress(PANCAKE_FACTORY, address)\n    );\n    chunkPoolAddressApePromises.push(\n      bep20Proxy.getPoolAddress(APE_FACTORY, address)\n    );\n    chunkPoolReservePancakePromises.push(\n      bep20Proxy.getReversesMulti(PANCAKE_FACTORY, address)\n    );\n    chunkPoolReserveApePromises.push(\n      bep20Proxy.getReversesMulti(APE_FACTORY, address)\n    );\n  });\n\n  const chunkDatas = await Promise.all([\n    ...chunkPoolAddressPancakePromises,\n    ...chunkPoolAddressApePromises,\n    ...chunkPoolReservePancakePromises,\n    ...chunkPoolReserveApePromises,\n    bep20Proxy.getReversesMulti(PANCAKE_FACTORY, [\n      [BUSD_BEP20.address, BNB_BEP20.address],\n    ]),\n  ]);\n  const chunkLength: number = (_.size(chunkDatas) - 1) / 4;\n  const poolAddressReserve: TPoolAddressReserve = [\n    _.flatten(_.slice(chunkDatas, 0, chunkLength) as string[][]),\n    _.flatten(_.slice(chunkDatas, chunkLength, chunkLength * 2) as string[][]),\n    _.flatten([\n      ..._.slice(chunkDatas, chunkLength * 2, chunkLength * 3),\n      _.last(chunkDatas),\n    ] as [BigNumber, BigNumber][][]),\n    _.flatten(\n      _.slice(chunkDatas, chunkLength * 3, chunkLength * 4) as [\n        BigNumber,\n        BigNumber\n      ][][]\n    ),\n  ];\n\n  return poolAddressReserve;\n}\n\nfunction mappingCategorizePool(\n  poolAddressReserve: TPoolAddressReserve,\n  chunkNumber: number\n): TCategorizePool {\n  const chunkAddressPancake = _.chunk(poolAddressReserve[0], chunkNumber);\n  const chunkAddressApe = _.chunk(poolAddressReserve[1], chunkNumber);\n  const chunkReservePancake = _.chunk(poolAddressReserve[2], chunkNumber);\n  const chunkReserveApe = _.chunk(poolAddressReserve[3], chunkNumber);\n\n  const categorizePool: TCategorizePool = {\n    pancake: {\n      busd: {\n        address: chunkAddressPancake[0],\n        reserve: chunkReservePancake[0],\n      },\n      usdt: {\n        address: chunkAddressPancake[1],\n        reserve: chunkReservePancake[1],\n      },\n      usdc: {\n        address: chunkAddressPancake[2],\n        reserve: chunkReservePancake[2],\n      },\n      bnb: {\n        address: chunkAddressPancake[3],\n        reserve: chunkReservePancake[3],\n      },\n    },\n    ape: {\n      busd: {\n        address: chunkAddressApe[0],\n        reserve: chunkReserveApe[0],\n      },\n      usdt: {\n        address: chunkAddressApe[1],\n        reserve: chunkReserveApe[1],\n      },\n      usdc: {\n        address: chunkAddressApe[2],\n        reserve: chunkReserveApe[2],\n      },\n      bnb: {\n        address: chunkAddressApe[3],\n        reserve: chunkReserveApe[3],\n      },\n    },\n  };\n\n  return categorizePool;\n}\n\nfunction mappingPoolAddressReserve(\n  dApp: DApp,\n  categorizeAddressReserve: TCategorizeAddressReserve,\n  tokenIndex: number,\n  tokenDecimals: number,\n  bnbReservePrice: number\n): IPool[] {\n  let pools: IPool[] = [\n    {\n      dApp,\n      address: categorizeAddressReserve.busd.address[tokenIndex].toLowerCase(),\n      quoteSymbol: BUSD_BEP20.symbol as string,\n      quoteAddress: BUSD_BEP20.address,\n      liquidity: tokenHelper.computedLiquidity(\n        categorizeAddressReserve.busd.reserve[tokenIndex]\n      ),\n      reservePrice: tokenHelper.computedTokenReservePricePerQuote(\n        categorizeAddressReserve.busd.reserve[tokenIndex],\n        tokenDecimals\n      ),\n      reserve: [\n        utils.formatUnits(\n          categorizeAddressReserve.busd.reserve[tokenIndex][0],\n          tokenDecimals\n        ),\n        utils.formatUnits(\n          categorizeAddressReserve.busd.reserve[tokenIndex][1],\n          tokenDecimals\n        ),\n      ],\n    },\n    {\n      dApp,\n      address: categorizeAddressReserve.usdt.address[tokenIndex].toLowerCase(),\n      quoteSymbol: USDT_BEP20.symbol as string,\n      quoteAddress: USDT_BEP20.address,\n      liquidity: tokenHelper.computedLiquidity(\n        categorizeAddressReserve.usdt.reserve[tokenIndex]\n      ),\n      reservePrice: tokenHelper.computedTokenReservePricePerQuote(\n        categorizeAddressReserve.usdt.reserve[tokenIndex],\n        tokenDecimals\n      ),\n      reserve: [\n        utils.formatUnits(\n          categorizeAddressReserve.usdt.reserve[tokenIndex][0],\n          tokenDecimals\n        ),\n        utils.formatUnits(\n          categorizeAddressReserve.usdt.reserve[tokenIndex][1],\n          tokenDecimals\n        ),\n      ],\n    },\n    {\n      dApp,\n      address: categorizeAddressReserve.usdc.address[tokenIndex].toLowerCase(),\n      quoteSymbol: USDC_BEP20.symbol as string,\n      quoteAddress: USDC_BEP20.address,\n      liquidity: tokenHelper.computedLiquidity(\n        categorizeAddressReserve.usdc.reserve[tokenIndex]\n      ),\n      reservePrice: tokenHelper.computedTokenReservePricePerQuote(\n        categorizeAddressReserve.usdc.reserve[tokenIndex],\n        tokenDecimals\n      ),\n      reserve: [\n        utils.formatUnits(\n          categorizeAddressReserve.usdc.reserve[tokenIndex][0],\n          tokenDecimals\n        ),\n        utils.formatUnits(\n          categorizeAddressReserve.usdc.reserve[tokenIndex][1],\n          tokenDecimals\n        ),\n      ],\n    },\n    {\n      dApp,\n      address: categorizeAddressReserve.bnb.address[tokenIndex].toLowerCase(),\n      quoteSymbol: BNB_BEP20.symbol as string,\n      quoteAddress: BNB_BEP20.address,\n      liquidity:\n        tokenHelper.computedLiquidity(\n          categorizeAddressReserve.bnb.reserve[tokenIndex]\n        ) * bnbReservePrice,\n      reservePrice:\n        tokenHelper.computedTokenReservePricePerQuote(\n          categorizeAddressReserve.bnb.reserve[tokenIndex],\n          tokenDecimals\n        ) * bnbReservePrice,\n      reserve: [\n        utils.formatUnits(\n          categorizeAddressReserve.bnb.reserve[tokenIndex][0],\n          tokenDecimals\n        ),\n        utils.formatUnits(\n          categorizeAddressReserve.bnb.reserve[tokenIndex][1],\n          tokenDecimals\n        ),\n      ],\n    },\n  ];\n\n  pools = pools.filter(\n    (pool: IPool): boolean => pool.address !== INVALID_ADDRESS\n  );\n\n  return pools;\n}\n","import _ from 'lodash';\nimport { Contract, Event, EventFilter, utils, BigNumber } from 'ethers';\nimport { toast } from 'react-toastify';\nimport { CHUNK_DATA_NUMBER } from '../config/appConfig';\nimport {\n  BUSD_BEP20,\n  USDT_BEP20,\n  USDC_BEP20,\n  BNB_BEP20,\n} from '../config/tokenBep20Config';\nimport { ABI_BEP20_PAIR } from '../config/abiBep20Config';\nimport {\n  PANCAKE_FACTORY,\n  APE_FACTORY,\n  BNB_BUSD_PANCAKE_POOL,\n} from '../config/web3Config';\nimport tokenHelper from '../helper/tokenHelper';\nimport { bscProvider, bep20Proxy } from './web3Service';\nimport { dispatch, getState } from '../store/config/store';\nimport tokenAction from '../store/tokenActionCreater';\nimport { DApp, IPool, ITokenDetail } from '../model/tokenModel';\n\ntype TTokenReserve = { [key: string]: [BigNumber, BigNumber] };\n\nexport async function updateTokenPrice() {\n  const tokens: ITokenDetail[] = getState().tokens;\n  const newTokens: ITokenDetail[] = await getTokenPrice(tokens);\n\n  dispatch(tokenAction.updateTokenPrice(newTokens));\n}\n\nexport async function getTokenPrice(\n  tokens: ITokenDetail[],\n  dApp?: DApp\n): Promise<ITokenDetail[]> {\n  if (_.size(tokens) === 0) {\n    return tokens;\n  }\n\n  let newTokens: ITokenDetail[];\n  let pancakeAdressPairs: [string, string][] = [];\n  let apeAdressPairs: [string, string][] = [];\n\n  tokens.forEach((token: ITokenDetail) => {\n    switch (dApp || token.targetPool?.dApp) {\n      case DApp.PANCAKE:\n        pancakeAdressPairs.push([\n          token.targetPool?.quoteAddress as string,\n          token.address,\n        ]);\n        break;\n\n      case DApp.APE:\n        apeAdressPairs.push([\n          token.targetPool?.quoteAddress as string,\n          token.address,\n        ]);\n        break;\n    }\n  });\n\n  let poolReserve: [[BigNumber, BigNumber][], [BigNumber, BigNumber][]] = [\n    [],\n    [],\n  ];\n  let isRequestError = false;\n\n  try {\n    poolReserve = await updateChunkTokenPrice(\n      pancakeAdressPairs,\n      apeAdressPairs,\n      dApp\n    );\n  } catch (error) {\n    isRequestError = true;\n    toastUpdateTokenPriceError();\n    console.log(error);\n  }\n\n  if (isRequestError) {\n    return await getTokenPrice(tokens, dApp);\n  }\n\n  const bnbReservePrice = tokenHelper.computedTokenReservePricePerQuote(\n    _.last(poolReserve[0]) as [BigNumber, BigNumber]\n  );\n\n  const tokenReserve: TTokenReserve = mappingTokeReserve(\n    [...pancakeAdressPairs, ...apeAdressPairs],\n    [...poolReserve[0].slice(0, poolReserve[0].length - 1), ...poolReserve[1]]\n  );\n\n  newTokens = tokens.map((token: ITokenDetail): ITokenDetail => {\n    const reserve = tokenReserve[token.address];\n    let liquidity: number = token.targetPool?.liquidity as number;\n    let reservePrice: number = token.price as number;\n\n    switch (token.targetPool?.quoteAddress) {\n      case BUSD_BEP20.address:\n      case USDT_BEP20.address:\n      case USDC_BEP20.address:\n        liquidity = tokenHelper.computedLiquidity(reserve);\n        reservePrice = tokenHelper.computedTokenReservePricePerQuote(\n          reserve,\n          token.decimals\n        );\n\n        break;\n\n      case BNB_BEP20.address:\n        liquidity = tokenHelper.computedLiquidity(reserve) * bnbReservePrice;\n        reservePrice =\n          tokenHelper.computedTokenReservePricePerQuote(\n            reserve,\n            token.decimals\n          ) * bnbReservePrice;\n\n        break;\n    }\n\n    return {\n      ...token,\n      price: reservePrice,\n      targetPool: {\n        ...(token.targetPool as IPool),\n        liquidity,\n        reservePrice,\n      },\n    };\n  });\n\n  return newTokens;\n}\n\nasync function updateChunkTokenPrice(\n  pancakeAdressPairs: [string, string][],\n  apeAdressPairs: [string, string][],\n  dApp?: DApp\n): Promise<[[BigNumber, BigNumber][], [BigNumber, BigNumber][]]> {\n  const isQuotePancake = !dApp || dApp === DApp.PANCAKE;\n  const chunkPancakeAddress: [string, string][][] = _.chunk(\n    isQuotePancake\n      ? [...pancakeAdressPairs, [BUSD_BEP20.address, BNB_BEP20.address]]\n      : pancakeAdressPairs,\n    CHUNK_DATA_NUMBER\n  );\n  const chunkApeAddress: [string, string][][] = _.chunk(\n    !isQuotePancake\n      ? [...apeAdressPairs, [BUSD_BEP20.address, BNB_BEP20.address]]\n      : apeAdressPairs,\n    CHUNK_DATA_NUMBER\n  );\n  let chunkPoolReservePancakePromises: Promise<any>[] = [];\n  let chunkPoolReserveApePromises: Promise<any>[] = [];\n\n  _.each(chunkPancakeAddress, (address: [string, string][]) => {\n    chunkPoolReservePancakePromises.push(\n      bep20Proxy.getReversesMulti(PANCAKE_FACTORY, address)\n    );\n  });\n  _.each(chunkApeAddress, (address: [string, string][]) => {\n    chunkPoolReserveApePromises.push(\n      bep20Proxy.getReversesMulti(APE_FACTORY, address)\n    );\n  });\n\n  const chunkDatas = await Promise.all([\n    ...chunkPoolReservePancakePromises,\n    ...chunkPoolReserveApePromises,\n  ]);\n  const poolReserve: [[BigNumber, BigNumber][], [BigNumber, BigNumber][]] =\n    isQuotePancake\n      ? [\n          _.flatten(\n            _.slice(chunkDatas, 0, _.size(chunkPoolReservePancakePromises)) as [\n              BigNumber,\n              BigNumber\n            ][][]\n          ),\n          _.flatten(\n            _.slice(\n              chunkDatas,\n              _.size(chunkPoolReservePancakePromises),\n              _.size(chunkDatas)\n            ) as [BigNumber, BigNumber][][]\n          ),\n        ]\n      : [\n          [\n            ..._.flatten(\n              _.slice(\n                chunkDatas,\n                0,\n                _.size(chunkPoolReservePancakePromises)\n              ) as [BigNumber, BigNumber][][]\n            ),\n            _.last(_.last(chunkDatas)) as [BigNumber, BigNumber],\n          ],\n          _.slice(\n            _.flatten(\n              _.slice(\n                chunkDatas,\n                _.size(chunkPoolReservePancakePromises),\n                _.size(chunkDatas)\n              ) as [BigNumber, BigNumber][][]\n            ),\n            0,\n            _.size(apeAdressPairs)\n          ),\n        ];\n\n  return poolReserve;\n}\n\nfunction mappingTokeReserve(\n  addressPairs: [string, string][],\n  reserve: [BigNumber, BigNumber][]\n): TTokenReserve {\n  const tokenReserve: TTokenReserve = {};\n\n  addressPairs.forEach((address: [string, string], index: number) => {\n    tokenReserve[address[1]] = reserve[index];\n  });\n\n  return tokenReserve;\n}\n\nlet timer = 0;\nfunction toastUpdateTokenPriceError() {\n  timer++;\n  if (timer === 1) {\n    toast.error('Update token price failure!', {\n      autoClose: 1000,\n      hideProgressBar: true,\n    });\n    timer++;\n  } else if (timer === 5) {\n    timer = 0;\n  }\n}\n\n// Legacy code\ntype TSwapAmount = {\n  amount0In: BigNumber;\n  amount0Out: BigNumber;\n  amount1In: BigNumber;\n  amount1Out: BigNumber;\n};\n\nexport async function updateTokenOldPrice() {\n  const OLD_BLOCK = 400;\n  const RANGE_BLOCK = 60;\n  const tokens: ITokenDetail[] = getState().tokens;\n  const bnbToken: ITokenDetail = {\n    ...BNB_BEP20,\n    targetPool: {\n      address: BNB_BUSD_PANCAKE_POOL,\n      quoteSymbol: BUSD_BEP20.symbol as string,\n      quoteAddress: BUSD_BEP20.address,\n    },\n  };\n  const lastBlock: number = await bscProvider.getBlockNumber();\n  let oldSwapPromises: Promise<ITokenDetail | null>[] = [];\n\n  [...tokens, bnbToken].forEach((token: ITokenDetail) => {\n    const poolContract = new Contract(\n      token.targetPool?.address as string,\n      ABI_BEP20_PAIR,\n      bscProvider\n    );\n    const filter: EventFilter = poolContract.filters.Swap();\n    const oldSwapPromise = poolContract\n      .queryFilter(\n        filter,\n        lastBlock - OLD_BLOCK - RANGE_BLOCK,\n        lastBlock - OLD_BLOCK\n      )\n      .then((results: Event[]): ITokenDetail | null => {\n        if (results.length === 0) {\n          return null;\n        }\n\n        const swapAmount: TSwapAmount = {\n          amount0In: _.last(results)?.args?.['amount0In'],\n          amount0Out: _.last(results)?.args?.['amount0Out'],\n          amount1In: _.last(results)?.args?.['amount1In'],\n          amount1Out: _.last(results)?.args?.['amount1Out'],\n        };\n\n        return {\n          ...token,\n          oldPrice: Math.abs(\n            computedTokenSwapPricePerQuote(\n              token.targetPool?.quoteAddress as string,\n              token.address,\n              token.decimals as number,\n              swapAmount\n            )\n          ),\n        };\n      });\n\n    oldSwapPromises.push(oldSwapPromise);\n  });\n\n  let oldSwapTokens: ITokenDetail[] = _.compact(\n    await Promise.all(oldSwapPromises)\n  );\n\n  oldSwapTokens = convertOldPriceToUsd(oldSwapTokens);\n\n  dispatch(tokenAction.updateTokenOldPrice(oldSwapTokens));\n}\n\nfunction computedTokenSwapPricePerQuote(\n  quoteTokenAddress: string,\n  tokenAddress: string,\n  tokenDecimals: number,\n  swapAmount: TSwapAmount\n): number {\n  const quoteTokenBigNumber = BigNumber.from(quoteTokenAddress);\n  const tokenBigNumber = BigNumber.from(tokenAddress);\n\n  let swapPrice: number;\n\n  if (quoteTokenBigNumber.lt(tokenBigNumber)) {\n    const amount0In = Number(utils.formatEther(swapAmount.amount0In));\n    const amount0Out = Number(utils.formatEther(swapAmount.amount0Out));\n    const amount1In = Number(\n      utils.formatUnits(swapAmount.amount1In, tokenDecimals)\n    );\n    const amount1Out = Number(\n      utils.formatUnits(swapAmount.amount1Out, tokenDecimals)\n    );\n\n    if (amount0In) {\n      swapPrice = amount0In / amount1Out;\n    } else {\n      swapPrice = -amount0Out / amount1In;\n    }\n  } else {\n    const amount0In = Number(\n      utils.formatUnits(swapAmount.amount0In, tokenDecimals)\n    );\n    const amount0Out = Number(\n      utils.formatUnits(swapAmount.amount0Out, tokenDecimals)\n    );\n    const amount1In = Number(utils.formatEther(swapAmount.amount1In));\n    const amount1Out = Number(utils.formatEther(swapAmount.amount1Out));\n\n    if (amount0In) {\n      swapPrice = -amount1Out / amount0In;\n    } else {\n      swapPrice = amount1In / amount0Out;\n    }\n  }\n\n  return swapPrice;\n}\n\nfunction convertOldPriceToUsd(oldSwapTokens: ITokenDetail[]): ITokenDetail[] {\n  const oldPriceBnb: number = _.last(oldSwapTokens)?.oldPrice as number;\n\n  return oldSwapTokens.map((token: ITokenDetail): ITokenDetail => {\n    if (BNB_BEP20.address === token.targetPool?.quoteAddress) {\n      return {\n        ...token,\n        oldPrice: (token.oldPrice as number) * (oldPriceBnb as number),\n      };\n    }\n\n    return token;\n  });\n}\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"btnIcon\":\"InputText_btnIcon__2xZss\",\"btnIconIOS\":\"InputText_btnIconIOS__vG8tS\"};"],"sourceRoot":""}